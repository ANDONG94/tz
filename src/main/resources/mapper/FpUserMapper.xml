<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tdkj.dao.UserManager.FpUserMapper" >
  <resultMap id="BaseResultMap" type="com.tdkj.model.FpUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" property="id" jdbcType="VARCHAR" />
    <result column="USERNAME" property="username" jdbcType="VARCHAR" />
    <result column="PASSWORD" property="password" jdbcType="VARCHAR" />
    <result column="REALNAME" property="realname" jdbcType="VARCHAR" />
    <result column="USERTYPE" property="usertype" jdbcType="VARCHAR" />
    <result column="COMENT" property="coment" jdbcType="VARCHAR" />
    <result column="CREATEDDATE" property="createddate" jdbcType="TIMESTAMP" />
    <result column="UPDATEDDATE" property="updateddate" jdbcType="TIMESTAMP" />
    <result column="FLAG" property="flag" jdbcType="VARCHAR" />
    <result column="MOBILEPHOME" property="mobilephome" jdbcType="VARCHAR" />
    <result column="IDCARD" property="idcard" jdbcType="VARCHAR" />
    <result column="IMAGEPATH" property="imagepath" jdbcType="VARCHAR" />
    <result column="SEX" property="sex" jdbcType="VARCHAR" />
    <result column="AGE" property="age" jdbcType="VARCHAR" />
    <result column="AAB301" property="aab301" jdbcType="VARCHAR" />
    <result column="INFO" property="info" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ID, USERNAME, PASSWORD, REALNAME, USERTYPE, COMENT, CREATEDDATE, UPDATEDDATE, FLAG, 
    MOBILEPHOME, IDCARD, IMAGEPATH, SEX, AGE, AAB301
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from FP_USER
    where ID = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from FP_USER
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.tdkj.model.FpUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into FP_USER (ID, USERNAME, PASSWORD, 
      REALNAME, USERTYPE, COMENT, 
      CREATEDDATE, UPDATEDDATE, FLAG, 
      MOBILEPHOME, IDCARD, IMAGEPATH, 
      SEX, AGE, AAB301)
    values (#{id,jdbcType=VARCHAR}, #{username,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{realname,jdbcType=VARCHAR}, #{usertype,jdbcType=VARCHAR}, #{coment,jdbcType=VARCHAR}, 
      #{createddate,jdbcType=TIMESTAMP}, #{updateddate,jdbcType=TIMESTAMP}, #{flag,jdbcType=VARCHAR}, 
      #{mobilephome,jdbcType=VARCHAR}, #{idcard,jdbcType=VARCHAR}, #{imagepath,jdbcType=VARCHAR}, 
      #{sex,jdbcType=VARCHAR}, #{age,jdbcType=VARCHAR}, #{aab301,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.tdkj.model.FpUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into FP_USER
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="username != null" >
        USERNAME,
      </if>
      <if test="password != null" >
        PASSWORD,
      </if>
      <if test="realname != null" >
        REALNAME,
      </if>
      <if test="usertype != null" >
        USERTYPE,
      </if>
      <if test="coment != null" >
        COMENT,
      </if>
      <if test="createddate != null" >
        CREATEDDATE,
      </if>
      <if test="updateddate != null" >
        UPDATEDDATE,
      </if>
      <if test="flag != null" >
        FLAG,
      </if>
      <if test="mobilephome != null" >
        MOBILEPHOME,
      </if>
      <if test="idcard != null" >
        IDCARD,
      </if>
      <if test="imagepath != null" >
        IMAGEPATH,
      </if>
      <if test="sex != null" >
        SEX,
      </if>
      <if test="age != null" >
        AGE,
      </if>
      <if test="aab301 != null" >
        AAB301,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        #{username,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="realname != null" >
        #{realname,jdbcType=VARCHAR},
      </if>
      <if test="usertype != null" >
        #{usertype,jdbcType=VARCHAR},
      </if>
      <if test="coment != null" >
        #{coment,jdbcType=VARCHAR},
      </if>
      <if test="createddate != null" >
        #{createddate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateddate != null" >
        #{updateddate,jdbcType=TIMESTAMP},
      </if>
      <if test="flag != null" >
        #{flag,jdbcType=VARCHAR},
      </if>
      <if test="mobilephome != null" >
        #{mobilephome,jdbcType=VARCHAR},
      </if>
      <if test="idcard != null" >
        #{idcard,jdbcType=VARCHAR},
      </if>
      <if test="imagepath != null" >
        #{imagepath,jdbcType=VARCHAR},
      </if>
      <if test="sex != null" >
        #{sex,jdbcType=VARCHAR},
      </if>
      <if test="age != null" >
        #{age,jdbcType=VARCHAR},
      </if>
      <if test="aab301 != null" >
        #{aab301,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.tdkj.model.FpUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update FP_USER
    <set >
      <if test="username != null" >
        USERNAME = #{username,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        PASSWORD = #{password,jdbcType=VARCHAR},
      </if>
      <if test="realname != null" >
        REALNAME = #{realname,jdbcType=VARCHAR},
      </if>
      <if test="usertype != null" >
        USERTYPE = #{usertype,jdbcType=VARCHAR},
      </if>
      <if test="coment != null" >
        COMENT = #{coment,jdbcType=VARCHAR},
      </if>
      <if test="createddate != null" >
        CREATEDDATE = #{createddate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateddate != null" >
        UPDATEDDATE = #{updateddate,jdbcType=TIMESTAMP},
      </if>
      <if test="flag != null" >
        FLAG = #{flag,jdbcType=VARCHAR},
      </if>
      <if test="mobilephome != null" >
        MOBILEPHOME = #{mobilephome,jdbcType=VARCHAR},
      </if>
      <if test="idcard != null" >
        IDCARD = #{idcard,jdbcType=VARCHAR},
      </if>
      <if test="imagepath != null" >
        IMAGEPATH = #{imagepath,jdbcType=VARCHAR},
      </if>
      <if test="sex != null" >
        SEX = #{sex,jdbcType=VARCHAR},
      </if>
      <if test="age != null" >
        AGE = #{age,jdbcType=VARCHAR},
      </if>
      <if test="aab301 != null" >
        AAB301 = #{aab301,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.tdkj.model.FpUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update FP_USER
    set USERNAME = #{username,jdbcType=VARCHAR},
      PASSWORD = #{password,jdbcType=VARCHAR},
      REALNAME = #{realname,jdbcType=VARCHAR},
      USERTYPE = #{usertype,jdbcType=VARCHAR},
      COMENT = #{coment,jdbcType=VARCHAR},
      CREATEDDATE = #{createddate,jdbcType=TIMESTAMP},
      UPDATEDDATE = #{updateddate,jdbcType=TIMESTAMP},
      FLAG = #{flag,jdbcType=VARCHAR},
      MOBILEPHOME = #{mobilephome,jdbcType=VARCHAR},
      IDCARD = #{idcard,jdbcType=VARCHAR},
      IMAGEPATH = #{imagepath,jdbcType=VARCHAR},
      SEX = #{sex,jdbcType=VARCHAR},
      AGE = #{age,jdbcType=VARCHAR},
      AAB301 = #{aab301,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>

  <!--用户名密码登录查询-->
  <select id="LoginByUserNameAndPwd" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />,(select info from poor_xzqh where xzqhbm=aab301) info
    from FP_USER u
    where u.username= #{0} and u.password=#{1}
  </select>

  <!--根据行政区划查询用户数量-->
  <select id="countUserByAab301" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    count(1)
    from FP_USER u
    where u.aab301= #{aab301,jdbcType=VARCHAR}
  </select>

  <!--根据用户名查询用户信息-->
  <select id="queryUserByUserName" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from FP_USER u
    where u.username= #{username,jdbcType=VARCHAR}
  </select>


  <!--根据行政区划查询用户信息-->
  <select id="queryFpUserByAab301" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select ID, USERNAME, PASSWORD, REALNAME, USERTYPE, COMENT, CREATEDDATE, UPDATEDDATE, FLAG,
    MOBILEPHOME, IDCARD, IMAGEPATH, SEX, AGE, AAB301,rn
    from (select ID, USERNAME, PASSWORD, REALNAME, USERTYPE, COMENT, CREATEDDATE, UPDATEDDATE, FLAG,
    MOBILEPHOME, IDCARD, IMAGEPATH, SEX, AGE, AAB301, rownum rn
    from (select ID, USERNAME, PASSWORD, REALNAME, USERTYPE, COMENT, CREATEDDATE, UPDATEDDATE, FLAG,
    MOBILEPHOME, IDCARD, IMAGEPATH, SEX, AGE, t.info AAB301
    from FP_USER,POOR_XZQH t where AAB301=t.XZQHBM and AAE100='1'
    <if test="aab301 != null and aab301 !='' ">
      AND AAB301 like #{aab301}
    </if>
    <if test="username != null and username !='' ">
      AND USERNAME like #{username}
    </if>
    <if test="realname != null and realname !='' ">
      AND REALNAME = #{realname}
    </if>
    <if test="idcard != null and idcard !='' ">
      AND idcard = #{idcard}
    </if>
    order by CREATEDDATE desc
    ) a1
    where rownum &lt;= #{pageSize})
    where rn &gt;= #{startRecord}

  </select>


  <!--根据行政区划查询用户信息总条数-->
  <select id="queryAllByAab301" resultType="java.lang.String" parameterType="java.lang.String" >
    select
    count(1)
    from FP_USER
    where  AAE100='1'
    <if test="aab301 != null  and aab301 !='' " >
      and AAB301 like #{aab301,jdbcType=VARCHAR}
    </if>
    <if test="username != null and username !='' ">
      AND USERNAME like #{username}
    </if>
    <if test="realname != null and realname !='' ">
      AND REALNAME = #{realname}
    </if>
    <if test="idcard != null and idcard !='' ">
      AND idcard = #{idcard}
    </if>
  </select>

</mapper>