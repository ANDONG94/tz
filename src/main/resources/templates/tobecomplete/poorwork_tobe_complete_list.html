<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>待完善贫困户</title>
    <link href="/css/hjia/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="/css/hjia/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="/css/hjia/animate.min.css" rel="stylesheet">
    <link href="/css/hjia/style.min.css?v=4.1.0" rel="stylesheet">
    <link href="/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <link href="/js/ztree/css/zTreeStyle.css" rel="stylesheet">
    <link href="/css/plugins/dataTables/dataTables.bootstrap.css" type="text/css" rel="stylesheet">
    <script src="/js/hjia/jquery.min.js?v=2.1.4"></script>
    <script src="/js/hjia/bootstrap.min.js?v=3.3.6"></script>
    <script src="/js/hjia/content.min.js?v=1.0.0"></script>
    <script src="/js/ztree/jquery.ztree.core.js"></script>
    <script src="/js/ztree/jquery.ztree.excheck.js"></script>
    <script src="/js/ztree/jquery.ztree.exedit.js"></script>
    <script src="/js/hjia/plugins/jeditable/jquery.jeditable.js"></script>
    <script src="/js/hjia/plugins/dataTables/jquery.dataTables.js"></script>
    <script src="/js/hjia/plugins/dataTables/dataTables.bootstrap.js"></script>
    <script src="/js/hjia/content.min.js?v=1.0.0"></script>
    <script src="/js/hjia/plugins/layer/layer.min.js"></script>
    <script src="/js/hjia/demo/layer-demo.min.js"></script>
    <script src="/js/hjia/plugins/validate/jquery.validate.min.js"></script>
    <script src="/js/hjia/plugins/validate/messages_zh.min.js"></script>
    <script src="/js/hjia/demo/form-validate-demo.min.js"></script>
    <script src="/js/hjia/plugins/sweetalert/sweetalert.min.js"></script>
    <script src="/js/hjia/plugins/layer/laydate/laydate.js"></script>

    <!--
        <script src="/js/information/poorwork.js" charset="utf-8"></script>
    -->
    <style>
        .col-lable2{width: 12%}
        .col-lable3{width: 21%}
        .col-lable4{width: 23%}
        .col-lable5{width: 73%}
        .form-group{
            margin-bottom: 0px;
        }
    </style>

</head>

<body class="gray-bg">
<div class="">
    <div class="row">
        <div class="col-sm-3" style="padding-right: 2px;width:17%">
            <div class="ibox-content" id="ztree_div_div" style="overflow-y:auto;">
                <ul id="tree-div" class="ztree" style="overflow: auto;"></ul>
            </div>
        </div>
        <div class="col-sm-9 animated fadeInRight" style="padding-left: 15px;width:83%">
            <div class="row">
                <div class="col-sm-14">
                    <div class="ibox float-e-margins border-bottom" style="margin-bottom: 0px;height: 50px;">
                        <div class="ibox-title">
                            <h5>查询条件&nbsp;&nbsp;&nbsp;&nbsp;目前所查询区域为：<span id="scan_xzqh" style="color: red"></span></h5>
                            <label style="width: 50%;margin-bottom: 0.1%;">
                                <a  href="javascript:void(0);" class="btn btn-primary " onclick="searchPoor()" style="float: right;margin-top: -1%; margin-right: 1%">查询</a>
<!--
                                <a  href="javascript:void(0);" onclick="deleteAll()"  class="btn btn-danger btn-del"  style="float: right;margin-top: -1%; margin-right: 1%">批量删除</a>
-->
<!--
                                <a  href="javascript:void(0);"  onclick="poiExcel()" class="btn btn-primary "  style="float: right;margin-top: -1%; margin-right: 1%">待确认贫困户导出</a>
-->
                                <a href="javascript:void(0);" onclick="reset()" class="btn btn-primary "
                                   style="float: right;margin-top: -1%; margin-right: 1%">重置</a>
                            </label>
                            <div class="ibox-tools">
                                <a class="collapse-link" onclick="click_shousuo(this)">
                                    <i class="fa fa-chevron-down"><font color="blue">展开</font></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content" id="select_div" style="display: none">
                            <label class="col-sm-1 control-label" style="width: 12%">户主姓名：</label>
                            <div class="col-sm-3" style="width: 22%;top: -7px; margin-left: -25px">
                                <input id="phd002_scan" name="phd002_scan" placeholder="请输入姓名..." type="text" class="form-control" >
                            </div>
                            <label class="col-sm-1 control-label" style="width: 12%">身份证：</label>
                            <div class="col-sm-3" style="width:22%;top: -7px; margin-left: -25px">
                                <input id="phd003_scan" name="phd003_scan" placeholder="请输入身份证..." type="text" class="form-control" >
                            </div>
                            <label class="col-sm-1 control-label" style="width: 12%">性别：</label>
                            <div class="col-sm-3" style="width:22%;top: -7px; margin-left: -25px">
                                <select id="phd004_scan"  class="form-control" name="phd004_scan">
                                    <option value=''>-- 请选择 --</option>
                                </select>
                            </div>

                            <label class="col-sm-1 control-label" style="width: 12%">易地扶贫搬迁：</label>
                            <div class="col-sm-3" style="width: 22%;top: -7px; margin-left: -25px">
                                <select id="phd013_scan"  class="form-control" name="phd013_scan"><option value=''>-- 请选择 --</option> </select>
                            </div>
                            <label class="col-sm-1 control-label" style="width: 12%">脱贫状态：</label>
                            <div class="col-sm-3" style="width: 22%;top: -7px; margin-left: -25px">
                                <select id="phd014_scan"  class="form-control" name="phd014_scan"><option value=''>-- 请选择 --</option> </select>
                            </div>
                            <label class="col-sm-1 control-label" style="width: 12%">是否残疾：</label>
                            <div class="col-sm-3" style="width: 22%;top: -7px; margin-left: -25px">
                                <select id="phd016_scan"  class="form-control" name="phd016_scan"><option value=''>-- 请选择 --</option> </select>
                            </div>

                           <!-- <label class="col-sm-1 control-label" style="width: 12%">电话号码：</label>
                            <div class="col-sm-3" style="width:22%;top: -7px; margin-left: -25px">
                                <input id="phd006_scan" name="phd006_scan" placeholder="请输入电话号码..." type="text" class="form-control" >
                            </div>-->
                            <label class="col-sm-1 control-label" style="width: 12%">年龄：</label>
                            <div class="col-sm-3" style="width: 10%;top: -7px; margin-left: -25px">
                                <input id="startage" name="startage" placeholder="请输入年龄开始..." type="number" class="form-control" >
                            </div>
                            <label class="col-sm-1 control-label" style="margin-left: -2%">到：</label>
                            <div class="col-sm-3" style="width: 10%;top: -7px; margin-left: -4.5%">
                                <input id="endage" name="endage" placeholder="请输入年龄结束..." type="number" class="form-control" >
                            </div>

                            <label class="col-sm-1 control-label" style="width: 12%">帮扶年度：</label>
                            <div class="col-sm-3" style="width: 22%;top: -7px; margin-left: -25px">
                                <input id="helpyear_scan" name="helpyear_scan" placeholder="请输入帮扶年度..." type="text" class="form-control" >
                            </div>


                            <label style="width: 100%;margin-top: 5px;margin-bottom: -15px">
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-14">
                    <div class="ibox float-e-margins border-bottom" style="margin-bottom: 0px;">
                        <div class="ibox-title">
                            <h5>信息展示项</h5>
                            <div class="ibox-tools">
                                <a class="collapse-link" onclick="click_shousuo(this)">
                                    <i class="fa fa-chevron-down"><font color="blue">展开</font></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content" style="display: none">
                            <label onclick="check_onclick()"><input  name="checkname"  value="3" type="checkbox" ><span>易地扶贫搬迁</span></label>
                            <label onclick="check_onclick()"><input  name="checkname"  value="4"  type="checkbox" ><span>脱贫状态</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="7" type="checkbox" ><span>劳动力数量</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="13" type="checkbox" ><span>年龄</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="14" type="checkbox" ><span>联系方式</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="15" type="checkbox" ><span>安置点名称</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="16" type="checkbox" ><span>是否残疾人</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="17" type="checkbox" ><span>认定年度</span></label>
                            </br>
                            <label onclick="check_onclick()"><input  name="checkname" value="8" type="checkbox" ><span>有就业创业意愿人数</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="9" type="checkbox" ><span>已就业创业人数</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="10" type="checkbox" ><span>已就业创业人姓名</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="11" type="checkbox" ><span>未就业创业人数</span></label>
                            <label onclick="check_onclick()"><input  name="checkname" value="12" type="checkbox" ><span>未就业创业人姓名</span></label>
                            </br>
                        </div>
                    </div>
                </div>
            </div>

            <!--这是列表信息开始-->
            <div class="row" id="row_div">
                <div class="col-sm-13" style="margin-top: -1%;">
                    <div class="ibox float-e-margins" style="height: 130px">
                        <div class="ibox-content" id="table_div">
                            <table class="table table-striped table-bordered table-hover " id="poorwork_table"><thead>
                            <tr>
                                <th><label><input onclick="checkallcheckbox()" type="checkbox" id="checkall" class="ace" name="checkall"/><span class="lbl"></span>全选</label></th>
                                <th>操作</th>
                                <th>所属行政区</th>
                                <th>户主姓名</th>
                                <th>易地扶贫搬迁</th>
                                <th>脱贫状态</th>
                                <th>性别</th>
                                <th>身份证号</th>
                                <th>劳动力数量</th>
                                <th>有就业创业意愿人数</th>
                                <th>已就业创业人数</th>
                                <th>已就业创业人姓名</th>
                                <th>未就业创业人数</th>
                                <th>未就业创业人姓名</th>
                                <th>年龄</th>
                                <th>联系方式</th>
                                <th>安置点名称</th>
                                <th>是否残疾人</th>
                                <th>认定年度</th>
                                <!-- <th>家庭住址</th>-->

                            </tr>
                            </thead></table><table>
                        </table>

                        </div>
                    </div>
                </div>
            </div>
            <!--这是列表信息结束-->
        </div>
    </div>
</div>

<!--模态窗口  模态窗口  贫困户信息  div-->
<div class="modal inmodal" id="useradd" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:1050px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                </button>
                <h6 id="addupdate" class="modal-title" style="font-size:16px">贫困户信息</h6>
            </div>

            <div class="modal-body">
                <form class="form-horizontal" id="commentForm" action="#" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">所属行政区：<span style="color: red">*</span></label>
                        <div class="col-sm-10" style="width: 87%">
                            <input id="aab301_id" name="aab301_id"  readonly="readonly"  type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">户主姓名：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd001" name="phd001"  type="hidden" >
                            <input id="aab301" name="aab301"  type="hidden" >
                            <input id="phd002" readonly="readonly" name="phd002" placeholder="请输入户主姓名..."  type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable2">身份证号：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd003" readonly="readonly" onchange="countPhd003(this.value)" name="phd003" placeholder="请输入户主身份证..." type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable2">年龄：</label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd005" name="phd005" placeholder="请输入户主年龄..." readonly="readonly" type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">户主电话：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd006" name="phd006" onchange="huzhuphone(this.value,'phd006')" placeholder="请输入户主电话..."  type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable2">性别：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="phd004"  class="form-control" readonly="readonly" name="phd004"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">易地扶贫搬迁：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3 ">
                            <select id="phd013"  class="form-control" name="phd013"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">安置点名称：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="phd010" name="phd010" class="form-control" ></select>
                        </div>
                       <!-- <label class="col-sm-2 control-label col-lable2">脱贫状态：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="phd014"  class="form-control" name="phd014"><option value=''>&#45;&#45; 请选择 &#45;&#45;</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">认定年度：</label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd012" name="phd012" placeholder="请输入认定年度..."  type="number" class="form-control" >
                        </div>-->
                        <label class="col-sm-2 control-label col-lable2">是否残疾人：</label>
                        <div class="col-sm-3 col-lable3" >
                            <select id="phd016"  class="form-control" name="phd016"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">户主状态：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="phd017" class="form-control" name="phd017">
                                <option value=''>-- 请选择 --</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">详细住址：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd007" name="phd007" placeholder="请输入详细住址..." type="text" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label col-lable2">备注：</label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd011" name="phd011" placeholder="请输入备注..."  type="text" class="form-control" >
                        </div>

                        <button type="button" class="btn btn-primary" id="save_poor_work_btn" onclick="savePoorWork()">保存贫困户</button>&nbsp;&nbsp;&nbsp;
                        <span id="add_laodongli_div" style="display: none;">
                            <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#workeradd" >添加家庭成员</button>&nbsp;&nbsp;&nbsp;&nbsp;-->
                            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#poorchange"
                                     onclick="poorChange()">户主变更</button>&nbsp;&nbsp;&nbsp;-->
                            <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#workeradd" onclick="poorAlsoWorker()">户主也是劳动力</button>-->
                            <!--<label><input type="checkbox" name="checkbox" value="">户主也是劳动力</label>-->
                        </span>
                    </div>
                </form>

                <div class="ibox-content" style="padding:0">
                    <div class="modal-header" style="padding: 10px 15px;text-align: left">
                        <h6 id="worker_head" class="modal-title" style="font-size:16px">家庭成员信息</h6>
                    </div>
                    <table class="table table-striped table-bordered table-hover " id="worker_table"><thead>
                    <tr>

                        <th>家庭成员姓名</th>
                        <th>证件号码</th>
                        <th>性别</th>
                        <th>年龄</th>
                        <th>劳动能力</th>
                        <th>上学状态</th>
                        <th>就业创业意愿</th>
                        <th>就业创业状态</th>
                        <th>文化程度</th>
                        <th>培训教育意愿</th>
                        <th>操作</th>
                    </tr>
                    </thead></table><table>
                </table>

                </div>

            </div>

        </div>
    </div>
</div>
<!--模态窗口  贫困户信息  div-->

<!--模态窗口  模态窗口  户主变更信息  div-->
<div class="modal inmodal" id="poorchange" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static"
     data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:1050px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">关闭</span>
                </button>
                <h6 id="pooraddupdate" class="modal-title" style="font-size:16px">户主变更信息</h6>
            </div>

            <div class="modal-body">
                <form class="form-horizontal" id="poorchangeForm" action="#" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">所属行政区：<span style="color: red">*</span></label>
                        <div class="col-sm-10" style="width: 87%">
                            <input id="aab301_id_id" name="aab301_id"  readonly="readonly"  type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">原户主姓名：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd001_old" name="phd001" type="hidden">
                            <input id="phd002_old" name="phd002_old" readonly="readonly" placeholder="请输入新户主姓名..." type="text" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label col-lable2">原户主身份证号：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd003_old"  name="phd003_old" readonly="readonly"
                                   placeholder="请输入户主身份证..." type="text" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label col-lable2">变更原因：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="changereason" name="changereason" placeholder="请输入变更原因..."  type="text"
                                   class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">新户主姓名：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd002_new" name="phd002" placeholder="请输入新户主姓名..." type="text" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label col-lable2">新户主身份证号：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd003_new" onchange="countPhd003_new(this.value)" name="phd003"
                                   placeholder="请输入户主身份证..." type="text" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label col-lable2">年龄：</label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd005_new" name="phd005" placeholder="请输入户主年龄..." readonly="readonly" type="text"
                                   class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">户主电话：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="phd006_new" name="phd006" onchange="huzhuphone(this.value,'phd006_new')"
                                   placeholder="请输入户主电话..." type="text" class="form-control">
                        </div>
                        <label class="col-sm-2 control-label col-lable2">性别：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="phd004_new" class="form-control" readonly="readonly" name="phd004">
                                <option value=''>-- 请选择 --</option>
                            </select>
                        </div>
                        <button type="button" class="btn btn-primary" id="save_poor_change_btn" onclick="savePoorChange()">保存新户主</button>&nbsp;&nbsp;&nbsp;

                    </div>

                </form>
                <div id="ceshi_worker_table_poor" style="overflow-y:auto; overflow-x:auto; width:100%;">
                    <div class="ibox-content" style="padding:0">
                        <div class="modal-header" style="padding: 10px 15px;text-align: left">
                            <h6 id="poor_record_head" class="modal-title" style="font-size:16px">户主变更记录信息</h6>
                        </div>
                        <table class="table table-striped table-bordered table-hover " id="poor_record_table">
                            <thead>
                            <tr>
                                <th>原户主姓名</th>
                                <th>原户主证件号码</th>
                                <th>新户主姓名</th>
                                <th>新户主证件号码</th>
                                <th>变更原因</th>
                            </tr>
                            </thead>
                        </table>
                        <table>
                        </table>

                    </div>
                </div>


            </div>

        </div>
    </div>
</div>
<!--模态窗口  户主变更信息  div-->

<input id="tree_aab301" name="tree_aab301" type="hidden">

<!--模态窗口  模态窗口  劳动力信息  div-->
<div class="modal inmodal" id="workeradd" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:1050px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                </button>
                <h6 id="workeradd_head" class="modal-title" style="font-size:16px">家庭成员信息</h6>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" id="workerForm" action="#" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">家庭成员姓名：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="plf001" name="plf001"  type="hidden" >
                            <input id="plf002" name="plf002"  type="hidden" >
                            <input id="plf004" readonly="readonly"  name="plf004" placeholder="请输入家庭成员姓名..."  type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable2">身份证号：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="plf005" readonly="readonly"  name="plf005"  onchange="countPlf005(this.value)" placeholder="请输入身份证号..." type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable2">性别：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf007"  class="form-control" name="plf007" readonly="readonly"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">劳动力电话：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <input id="plf006" name="plf006" onchange="huzhuphone(this.value,'plf006')" placeholder="请输入劳动力电话..."  type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable2">文化程度：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf009"  class="form-control" name="plf009"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">年龄：</label>
                        <div class="col-sm-3 col-lable3 ">
                            <input id="plf008" name="plf008" placeholder="请输入年龄..." readonly="readonly"  type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">上学状态：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf015" onchange="changeplf015(this.value)"   class="form-control" name="plf015" ><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">成员变更：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf025" onchange="changeplf025(this.value)" class="form-control" name="plf025"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">劳动能力：<span style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf018"  onchange="changeplf018(this.value)"  class="form-control" name="plf018" ><option value=''>-- 请选择 --</option> </select>
                        </div>

                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">就业创业状态：<span id="jiuye_status" style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf011" onchange="jiuye_status()" class="form-control" name="plf011"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">就业创业意愿：<span id="jiuye_yiyuan" style="color: red">*</span></label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf010" onchange="chuangye_status()" class="form-control" name="plf010"><option value=''>-- 请选择 --</option> </select>
                        </div>

                        <label class="col-sm-2 control-label col-lable2">培训教育状态：<!--<span id="peixun_status" style="color: red">*</span>--></label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf024" onchange="educate()" class="form-control" name="plf024"><option value=''>-- 请选择 --</option> </select>
                        </div>

                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label col-lable2">培训教育意愿：<!--<span id="peixun_yiyuan" style="color: red">*</span>--></label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf012"  class="form-control" name="plf012"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">是否残疾人：</label>
                        <div class="col-sm-3 col-lable3">
                            <select id="plf023"  class="form-control" name="plf023"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable2">备注：</label>
                        <div class="col-sm-2 col-lable3">
                            <input id="plf019" name="plf019" placeholder="请输入备注..."  type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <span id="plf017_span" style="display: none">
                            <label class="col-sm-2 control-label col-lable2">就业工作地意向：</label>
                            <div class="col-sm-3 col-lable3">
                                <select id="plf017"  class="form-control" name="plf017">
                                    <option value=''>-- 请选择 --</option>
                                </select>
                            </div>
                             <label class="col-sm-2 control-label col-lable2">就业意向地：</label>
                            <div class="col-sm-3 col-lable3">
                                <input id="plf026" name="plf026" placeholder="请输入就业意向地..."  type="text" class="form-control" >
                            </div>
                        </span>
                    </div>
                    <div class="form-group">
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary" id="save_worker_btn" onclick="saveWorker()">保存劳动力</button>&nbsp;&nbsp;&nbsp;
                        <span id="jineng" style="display: none;">
                            <button type="button" class="btn btn-primary" data-toggle="modal"  onclick="jiuyeadd_onclick()">添加就业信息</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button type="button" class="btn btn-primary" data-toggle="modal"  onclick="chuangyeadd_onclick()">添加创业信息</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button type="button" class="btn btn-primary" data-toggle="modal"  onclick="peixunadd_onclick()">添加培训信息</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#schooladd" onclick="schooladd_onclick()">添加技工院校信息</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
                        </span>
                    </div>
                </form>

                <div id="ceshi_many" style="overflow-y:auto; overflow-x:auto; width:100%;" >
                    <!--就业信息table 开始-->
                    <div class="ibox-content" style="padding:0">
                        <div class="modal-header" style="padding: 10px 15px;text-align: left">
                            <h6 id="jiuye_head_2" class="modal-title" style="font-size:16px">就业信息</h6>
                        </div>
                        <table class="table table-striped table-bordered table-hover " id="jiuye_table"><thead>
                        <tr>
                            <th>就业渠道</th>
                            <th>就业类型</th>
                            <th>就业地址</th>
                            <th>就业地域</th>
                            <th>就业单位</th>
                            <th>就业起始日期</th>
                            <th>就业终止日期</th>
                            <th>求职补贴</th>
                            <th>转移就业交通补贴</th>
                            <th>个人领取社保补贴</th>
                            <th>操作</th>
                        </tr>
                        </thead></table><table>
                    </table>
                    </div>
                    <!--就业信息table 结束-->
                    <!--创业信息table 开始-->
                    <div class="ibox-content" style="padding:0">
                        <div class="modal-header" style="padding: 10px 15px;text-align: left">
                            <h6 id="chuangye_head_2" class="modal-title" style="font-size:16px">创业信息</h6>
                        </div>
                        <table class="table table-striped table-bordered table-hover " id="chuangye_table"><thead>
                        <tr>
                            <th>创业项目</th>
                            <th>创业单位</th>
                            <th>创业地址</th>
                            <th>创业年度</th>
                            <th>创业起始日期</th>
                            <th>一次性创业补贴</th>
                            <th>创业担保贷款</th>
                            <th>个人领取社保补贴</th>
                            <th>操作</th>
                        </tr>
                        </thead></table><table>
                    </table>
                    </div>
                    <!--创业信息table 结束-->
                    <!--培训信息table 开始-->
                    <div class="ibox-content" style="padding:0">
                        <div class="modal-header" style="padding: 10px 15px;text-align: left">
                            <h6 id="" class="modal-title" style="font-size:16px">培训信息</h6>
                        </div>
                        <table class="table table-striped table-bordered table-hover " id="peixun_table"><thead>
                        <tr>
                            <th>培训类型</th>
                            <th>培训工种</th>
                            <th>培训单位</th>
                            <th>培训地址</th>
                            <th>培训起始日期</th>
                            <th>培训终止日期</th>
                            <th>培训后就业日期</th>
                            <th>操作</th>
                        </tr>
                        </thead></table><table>
                    </table>
                    </div>
                    <!--培训信息table 结束-->
                    <!--技工院校信息table 开始-->
                    <div class="ibox-content" style="padding:0">
                        <div class="modal-header" style="padding: 10px 15px;text-align: left">
                            <h6 id="school_head_2" class="modal-title" style="font-size:16px">技工院校信息</h6>
                        </div>
                        <table class="table table-striped table-bordered table-hover " id="school_table"><thead>
                        <tr>
                            <th>技工院校名称</th>
                            <th>技工院校地址</th>
                            <th>所学专业(工种)</th>
                            <th>入学日期</th>
                            <th>毕业日期</th>
                            <th>毕业后就业年月</th>
                            <th>操作</th>
                        </tr>
                        </thead></table><table>
                    </table>
                    </div>
                    <!--技工院校信息table 结束-->
                </div>
            </div>

        </div>
    </div>
</div>
<!--模态窗口  劳动力信息  div-->


<!--模态窗口  就业信息  div-->
<div class="modal inmodal" id="jiuyeadd" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:800px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                </button>
                <h6 id="jiuye_head" class="modal-title" style="font-size:16px">新增就业信息</h6>
            </div>

            <div class="modal-body">
                <form class="form-horizontal" id="jiuyeForm" action="#" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">就业渠道：<span style="color: red">*</span></label>
                        <input id="eys001" name="eys001"  type="hidden" >
                        <input id="eys002" name="eys002"  type="hidden" >
                        <div class="col-sm-3">
                            <select id="eys003"  class="form-control" name="eys003"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable4">就业地域：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="eys012"  class="form-control" name="eys012"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">就业类型：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="eys004" onchange="geteys004()" class="form-control" name="eys004"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-3 control-label col-lable4">上年度农业人均年纯收入：</label>
                        <div class="col-sm-3">
                            <input id="eys015" onblur="geteys015()" name="eys015" placeholder="上年度农业人均年纯收入..." type="number" class="form-control">
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">就业单位：</label>
                        <div class="col-sm-3">
                            <input id="eys006" name="eys006" placeholder="请输入就业单位..."  type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">就业单位性质：</label>
                        <div class="col-sm-3">
                            <select id="eys007"  class="form-control" name="eys007"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">岗位工种：</label>
                        <div class="col-sm-3">
                            <select id="eys005"  class="form-control" name="eys005"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable4">特色就业：</label>
                        <div class="col-sm-3">
                            <select id="eys011" onchange="eys011change(this.value)" class="form-control" name="eys011"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group" id="jiuye_type" style="display: none">
                        <label class="col-sm-2 control-label">岗位工资或补贴：</label>
                        <div class="col-sm-3">
                            <input id="eys017"  class="form-control" name="eys017" type="number">
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                        <label class="col-sm-2 control-label">工资发放周期：</label>
                        <div class="col-sm-3">
                            <input id="eys018"  class="form-control" name="eys018" type="number">
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">个月</label>
                    </div>

                    <!--<div class="form-group">
                        <label class="col-sm-2 control-label">享受政策：</label>
                        <div class="col-sm-9 col-lable5">
                            <label><input  name="eys022" id="eys022_1"  value="6" type="checkbox" >就业见习补贴<input id="eys019" readonly="readonly" style="width: 60px;" type="number" name="eys019" min="1">(元)</label>
                            <label><input  name="eys022" id="eys022_2" onchange="checkTrueorFalse('eys022_2')" value="7" type="checkbox" >求职补贴<input id="eys020" readonly="readonly" name="eys020" style="width: 60px;" type="number" min="1">(元)</label>
                            <label><input  name="eys022" id="eys022_3" onchange="checkTrueorFalse('eys022_3')" value="8" type="checkbox" >转移就业交通补贴<input id="eys021" readonly="readonly" name="eys021" style="width: 60px;" type="number" min="1">(元)</label>
                        </div>
                    </div>-->
                    <div class="form-group">
                        <label class="col-sm-2 control-label">就业起始日期：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <input id="eys009" name="eys009" placeholder="请输入就业起始日期..." type="text" class="laydate-icon form-control layer-date" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">就业终止日期：</label>
                        <div class="col-sm-3">
                            <input id="eys010" name="eys010" placeholder="请输入就业终止日期..."  type="text" class="laydate-icon form-control layer-date" >
                        </div>
                    </div>

                    <div class="form-group">
                        <!-- <label class="col-sm-2 control-label">转移就业交通补贴：</label>
                         <div class="col-sm-3">
                             <input id="eys021"  class="form-control" placeholder="转移就业交通补贴..."name="eys021" type="number">
                         </div>
                         <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>-->
                        <label class="col-sm-2 control-label">签订合同或协议：</label>
                        <div class="col-sm-3">
                            <input id="eys016" name="eys016" placeholder="签订合同或协议..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">个月</label>
                        <label class="col-sm-2 control-label">苏陕协作就业：</label>
                        <div class="col-sm-3">
                            <select id="eys024"  class="form-control" name="eys024">
                                <option value=''>-- 请选择 --</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">就业地址：<span style="color: red">*</span></label>
                        <div class="col-sm-8" style="width: 73%">
                            <input id="eys008" name="eys008" placeholder="请输入就业地址..."  type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">备注：</label>
                        <div class="col-sm-8" style="width: 73%">
                            <input id="eys014" name="eys014" placeholder="请输入备注..."  type="text" class="form-control" >
                        </div>
                    </div>
                    <div>

                        <hr />
                        <h5 id="aa" class="modal-title" style="font-size:16px">享受政策</h5>
                        <hr />
                    </div>

                    <div class="form-group" >
                        <label class="col-sm-2 control-label">就业见习补贴：</label>
                        <div class="col-sm-3">
                            <input id="eys019"  class="form-control" placeholder="就业见习补贴..." name="eys019" type="number">
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                        <label class="col-sm-2 control-label ">求职补贴：</label>
                        <div class="col-sm-3">
                            <input id="eys020"  class="form-control" placeholder="求职补贴..."  name="eys020" type="number">
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>
                    <div class="form-group">

                        <label class="col-sm-2 control-label">转移就业交通补贴：</label>
                        <div class="col-sm-3">
                            <input id="eys021"  class="form-control" placeholder="转移就业交通补贴..."name="eys021" type="number">
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>
                </form>
            </div>




            <div class="modal-footer" style="text-align: center">
                <button type="button" class="btn btn-primary" id="save_jiuye_btn"  onclick="saveJiuYe()">保存</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-white" onclick="clean_input_jiuye()">清空</button>
            </div>
        </div>
    </div>
</div>
<!--模态窗口  就业信息  div-->

<!--模态窗口  创业信息  div-->
<div class="modal inmodal" id="chuangyeadd" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:800px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                </button>
                <h6 id="chuangye_head" class="modal-title" style="font-size:16px">新增创业信息</h6>
            </div>

            <div class="modal-body">
                <form class="form-horizontal" id="chuangyeForm" action="#" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">创业项目：<span style="color: red">*</span></label>
                        <input id="epp001" name="epp001"  type="hidden" >
                        <input id="epp002" name="epp002"  type="hidden" >
                        <div class="col-sm-9 col-lable5">
                            <select id="epp003"  class="form-control" name="epp003"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">创业单位：</label>
                        <div class="col-sm-9 col-lable5">
                            <input id="epp004" name="epp004" placeholder="请输入创业单位..." type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">创业地址：<span style="color: red">*</span></label>
                        <div class="col-sm-9 col-lable5">
                            <input id="epp005" name="epp005" placeholder="请输入创业地址..." type="text" class="form-control" >
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">创业起始日期：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <input id="epp006" name="epp006" placeholder="请输入创业起始日期..." type="text" class="laydate-icon form-control layer-date" >
                        </div>
                        <label class="col-sm-2 control-label  col-lable4">创业结束日期：</label>
                        <div class="col-sm-3">
                            <input id="epp007" name="epp007" placeholder="请输入创业结束日期..." type="text" class="laydate-icon form-control layer-date" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">带动就业人数：</label>
                        <div class="col-sm-3">
                            <input id="epp011" name="epp011" placeholder="带动就业人数..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">带动贫困劳动力人数：</label>
                        <div class="col-sm-3">
                            <input id="epp012" name="epp012" placeholder="带动贫困劳动力人数..."  type="number" class="form-control" >
                        </div>
                    </div>
                    <!--<div class="form-group">
                        <label class="col-sm-2 control-label">创业担保贷款：</label>
                        <div class="col-sm-3">
                            <input id="epp014" name="epp014" placeholder="创业担保贷款..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                        <label class="col-sm-2 control-label ">创业补贴：</label>
                        <div class="col-sm-3">
                            <input id="epp015" name="epp015" placeholder="创业补贴..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>-->
                    <!-- <div class="form-group">
                         <label class="col-sm-2 control-label">享受政策：</label>
                         <div class="col-sm-9 col-lable5">
                            &lt;!&ndash; <label><input  name="epp013"  value="1" type="checkbox" >创业培训</label>
                             <label><input  name="epp013"  value="2" type="checkbox" >创业孵化</label>
                             &lt;!&ndash;onchange="checkTrueorFalse('epp013_1')"&ndash;&gt;
                             <label><input  name="epp013" id="epp013_1"   value="3" type="checkbox" >创业担保贷款<input id="epp014" readonly="readonly" style="width: 60px;" type="number" name="epp014"> 元 </label>
                             <label><input  name="epp013" id="epp013_2"  value="4" type="checkbox" >创业补贴<input id="epp015" readonly="readonly" name="epp015" style="width: 60px;" type="number"> 元 </label>
                             <label><input  name="epp013"  value="5" type="checkbox" >减免税</label>&ndash;&gt;
                         </div>
                     </div>-->
                    <div class="form-group">
                        <label class="col-sm-2 control-label">登记注册：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="epp010"  class="form-control" name="epp010"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label  col-lable4">备注：</label>
                        <div class="col-sm-3">
                            <input id="epp008" name="epp008" placeholder="请输入备注..."  type="text" class="form-control" >
                        </div>
                    </div>
                    <div>
                        <hr />
                        <h5 id="a1" class="modal-title" style="font-size:16px">享受政策</h5>
                        <hr />
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">创业担保贷款：</label>
                        <div class="col-sm-3">
                            <input id="epp014" name="epp014" placeholder="创业担保贷款..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                        <label class="col-sm-2 control-label ">创业补贴：</label>
                        <div class="col-sm-3">
                            <input id="epp015" name="epp015" placeholder="创业补贴..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-inline" style="margin-top: 1%;margin-left: 19%">
                            <input type="checkbox"  name="epp013" value="1"> 创业培训
                        </label>
                        <label class="checkbox-inline" style="margin-top: 1%;margin-left: 19%">
                            <input type="checkbox"  name="epp013"value="2"> 创业孵化
                        </label>
                        <label class="checkbox-inline" style="margin-top: 1%;margin-left: 19%">
                            <input type="checkbox" name="epp013" value="3"> 减免税
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="text-align: center">
                <button type="button" class="btn btn-primary" id="save_chuangye_btn" onclick="saveChuangye()">保存</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-white" onclick="clean_input_chuangye()">清空</button>
            </div>
        </div>
    </div>
</div>
<!--模态窗口  创业信息  div-->

<!--模态窗口  培训信息  div-->
<div class="modal inmodal" id="peixunadd" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:800px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                </button>
                <h6 id="peixun_head" class="modal-title" style="font-size:16px">新增培训信息</h6>
            </div>
            <form class="form-horizontal" id="peixunForm" action="#" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">培训单位：<span style="color: red">*</span></label>
                        <input id="tsn001" name="tsn001"  type="hidden" >
                        <input id="tsn010" name="tsn010"  type="hidden" >
                        <div class="col-sm-9 col-lable5">
                            <input id="tsn005" name="tsn005" placeholder="请输入培训单位..." type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">培训地址：<span style="color: red">*</span></label>
                        <div class="col-sm-9 col-lable5">
                            <input id="tsn006" name="tsn006" placeholder="请输入培训地址..." type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">培训类型：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="tsn003" onchange="changetsn003(this.value)" class="form-control" name="tsn003"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label col-lable4">培训工种：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="tsn004"  class="form-control" name="tsn004"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">培训起始日期：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <input id="tsn007" name="tsn007" placeholder="请输入培训起始日期..."  type="text" class="laydate-icon form-control layer-date" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">培训终止日期：</label>
                        <div class="col-sm-3">
                            <input id="tsn008" name="tsn008" placeholder="请输入培训终止日期..."  type="text" class="laydate-icon form-control layer-date" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">实际培训天数：</label>
                        <div class="col-sm-3">
                            <input id="tsn011" name="tsn011" placeholder="实际培训天数..."  type="number" class="form-control" >
                        </div>
                        <span id="tsn002_span" style="display: none;">
                        <label class="col-sm-2 control-label col-lable4" id="tsn002_label">培训后就业年月：</label>
                        <div class="col-sm-3">
                            <input id="tsn002" name="tsn002" type="text" class="laydate-icon form-control layer-date">
                        </div>
                         </span>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">苏陕协作：</label>
                        <div class="col-sm-3">
                            <select id="tsn012" onchange="tsn012change(this.value)" class="form-control" name="tsn012"><option value=''>-- 请选择 --</option> </select>
                        </div>
                        <label class="col-sm-2 control-label  col-lable4">享受生活和交通补贴：</label>
                        <div class="col-sm-3">
                            <input id="tsn016" name="tsn016" placeholder="享受生活和交通补贴..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>

                    </div>
                    <span id="tsn013_span" style="display: none">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">在苏就业年月：</label>
                            <div class="col-sm-3">
                                <input id="tsn013" name="tsn013" onchange="changetsn013(this.value,'tsn014','tsn015');" placeholder="在苏就业年月..."  type="text" class="laydate-icon form-control layer-date" >
                            </div>
                            <label class="col-sm-2 control-label col-lable4">在陕就业年月：</label>
                            <div class="col-sm-3">
                                <input id="tsn014" onchange="changetsn013(this.value,'tsn013','tsn015');" class="laydate-icon form-control layer-date" type="text" placeholder="在陕就业年月..." name="tsn014">
                            </div>
                        </div>
                    </span>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">备注：</label>
                        <div class="col-sm-3">
                            <input id="tsn009" name="tsn009" placeholder="请输入备注..."  type="text" class="form-control" >
                        </div>
                        <span id="tsn015_span" style="display: none">
                            <label class="col-sm-2 control-label col-lable4">在陕创业年月：</label>
                            <div class="col-sm-3">
                                <input id="tsn015" name="tsn015" onchange="changetsn013(this.value,'tsn013','tsn014');" placeholder="在苏就业年月..."  type="text" class="laydate-icon form-control layer-date" >
                            </div>
                        </span>
                    </div>
                    <!--<div>
                        <hr />
                        <h5 id="a2" class="modal-title" style="font-size:16px">享受政策</h5>
                        <hr />
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">享受培训和生活补贴：</label>
                        <div class="col-sm-3">
                            <input id="tsn016" name="tsn016" placeholder="享受培训和生活补贴..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>-->
                </div>
            </form>
            <div class="modal-footer" style="text-align: center">
                <button type="button" class="btn btn-primary" id="save_peixun_btn" onclick="savePeiXun()">保存</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-white" onclick="clean_input_peixun()">清空</button>
            </div>
        </div>
    </div>
</div>
<!--模态窗口  培训信息  div-->

<!--模态窗口  技工院校信息  div-->
<div class="modal inmodal" id="schooladd" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="margin:auto;width:800px">
        <div class="modal-content animated bounceInRight">
            <div class="modal-header" style="padding: 10px 15px;text-align: left">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span>
                </button>
                <h6 id="school_head" class="modal-title" style="font-size:16px">新增技工院校信息</h6>
            </div>

            <div class="modal-body">
                <form class="form-horizontal" id="schoolForm" action="#" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">技工院校名称：<span style="color: red">*</span></label>
                        <input id="ths001" name="ths001"  type="hidden" >
                        <input id="ths002" name="ths002"  type="hidden" >
                        <div class="col-sm-9 col-lable5">
                            <input id="ths003" name="ths003" placeholder="请输入技工院校名称..." type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">技工院校地址：<span style="color: red">*</span></label>
                        <div class="col-sm-9 col-lable5">
                            <input id="ths004" name="ths004" placeholder="请输入技工院校地址..." type="text" class="form-control" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">入学日期：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <input id="ths005" name="ths005" placeholder="请输入入学日期..."  type="text" class="laydate-icon form-control layer-date" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">毕业日期：</label>
                        <div class="col-sm-3">
                            <input id="ths006" name="ths006" placeholder="请输入毕业日期.."  type="text" class="laydate-icon form-control layer-date" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">所学专业：</label>
                        <div class="col-sm-3">
                            <input id="ths007" name="ths007" placeholder="请输入所学专业..."  type="text" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">毕业后就业日期：</label>
                        <div class="col-sm-3">
                            <input id="ths008" name="ths008" placeholder="请输入毕业后就业日期..."  type="text" class="laydate-icon form-control layer-date" >
                        </div>
                    </div>
                    <div class="form-group">

                        <label class="col-sm-2 control-label">学年制：</label>
                        <div class="col-sm-3">
                            <input id="ths013" name="ths013" placeholder="学年制..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2 control-label col-lable4">是否苏陕协作：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="ths010"  class="form-control" name="ths010"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>
                    <div class="form-group">

                        <label class="col-sm-2 control-label">享受助学金：</label>
                        <div class="col-sm-3">
                            <input id="ths014" name="ths014" placeholder="享受助学金..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>

                        <label class="col-sm-2 control-label">享受免学费补助：</label>
                        <div class="col-sm-3">
                            <input id="ths016" name="ths016" placeholder="享受免学费补助..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                    </div>
                    <div class="form-group">

                        <!--<label class="col-sm-2 control-label">享受雨露计划补贴：</label>
                        <div class="col-sm-3">
                            <input id="ths015" name="ths015" placeholder="享受雨露计划补贴..."  type="number" class="form-control" >
                        </div>
                        <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>-->
                        <label class="col-sm-2 control-label">院校区域：<span style="color: red">*</span></label>
                        <div class="col-sm-3">
                            <select id="ths009"  class="form-control" name="ths009"><option value=''>-- 请选择 --</option> </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">备注：</label>
                        <div class="col-sm-9 col-lable5">
                            <input id="ths011" name="ths011" placeholder="请输入备注..."  type="text" class="form-control" >
                        </div>
                    </div>
                    <!-- <div>
                         <hr />
                         <h5 id="a3" class="modal-title" style="font-size:16px">享受政策</h5>
                         <hr />
                     </div>
                     <div class="form-group">

                         <label class="col-sm-2 control-label">享受助学金：</label>
                         <div class="col-sm-3">
                             <input id="ths014" name="ths014" placeholder="享受助学金..."  type="number" class="form-control" >
                         </div>
                         <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>

                         <label class="col-sm-2 control-label">享受免学费补助：</label>
                         <div class="col-sm-3">
                             <input id="ths016" name="ths016" placeholder="享受免学费补助..."  type="number" class="form-control" >
                         </div>
                         <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                     </div>
                     <div class="form-group">

                         <label class="col-sm-2 control-label">享受雨露计划补贴：</label>
                         <div class="col-sm-3">
                             <input id="ths015" name="ths015" placeholder="享受雨露计划补贴..."  type="number" class="form-control" >
                         </div>
                         <label class="col-sm-2" style="margin-top: 1%;margin-left: -10%">元</label>
                     </div>-->
                </form>
            </div>
            <div class="modal-footer" style="text-align: center">
                <button type="button" class="btn btn-primary" id="save_school_btn" onclick="saveSchool()">保存</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-white" onclick="clean_input_school()">清空</button>
            </div>
        </div>
    </div>
</div>
<!--模态窗口  技工院校信息  div-->


<!--等待的模态框  和等待特效-->
<div class="modal inmodal fade" id="loading_div" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm">
        <div class="scene">
            <svg style="width: 200px;height: 200px;"
                 version="1.1"
                 id="dc-spinner"
                 xmlns="http://www.w3.org/2000/svg"
                 x="0px" y="0px"
                 viewBox="0 0 38 38"
                 preserveAspectRatio="xMinYMin meet"
            >
                <text x="14" y="21" font-family="Monaco" font-size="2px" style="letter-spacing:0.6" fill="yellow">LOADING
                    <animate
                            attributeName="opacity"
                            values="0;1;0" dur="1.8s"
                            repeatCount="indefinite"/>
                </text>
                <path fill="#373a42" d="M20,35c-8.271,0-15-6.729-15-15S11.729,5,20,5s15,6.729,15,15S28.271,35,20,35z M20,5.203
    C11.841,5.203,5.203,11.841,5.203,20c0,8.159,6.638,14.797,14.797,14.797S34.797,28.159,34.797,20
    C34.797,11.841,28.159,5.203,20,5.203z">
                </path>

                <path fill="#373a42" d="M20,33.125c-7.237,0-13.125-5.888-13.125-13.125S12.763,6.875,20,6.875S33.125,12.763,33.125,20
    S27.237,33.125,20,33.125z M20,7.078C12.875,7.078,7.078,12.875,7.078,20c0,7.125,5.797,12.922,12.922,12.922
    S32.922,27.125,32.922,20C32.922,12.875,27.125,7.078,20,7.078z">
                </path>

                <path fill="#2AA198" stroke="#2AA198" stroke-width="0.6027" stroke-miterlimit="10" d="M5.203,20
			c0-8.159,6.638-14.797,14.797-14.797V5C11.729,5,5,11.729,5,20s6.729,15,15,15v-0.203C11.841,34.797,5.203,28.159,5.203,20z">
                    <animateTransform
                            attributeName="transform"
                            type="rotate"
                            from="0 20 20"
                            to="360 20 20"
                            calcMode="spline"
                            keySplines="0.4, 0, 0.2, 1"
                            keyTimes="0;1"
                            dur="2s"
                            repeatCount="indefinite" />
                </path>

                <path fill="#859900" stroke="#859900" stroke-width="0.2027" stroke-miterlimit="10" d="M7.078,20
  c0-7.125,5.797-12.922,12.922-12.922V6.875C12.763,6.875,6.875,12.763,6.875,20S12.763,33.125,20,33.125v-0.203
  C12.875,32.922,7.078,27.125,7.078,20z">
                    <animateTransform
                            attributeName="transform"
                            type="rotate"
                            from="0 20 20"
                            to="360 20 20"
                            dur="1.8s"
                            repeatCount="indefinite" />
                </path>
            </svg>
        </div>
    </div>
</div>


<script>


    $(function () {
        //设置树的高度
        $("#ztree_div_div").css({"height":$(window).height()});
        $("#table_div").css({"height":$(window).height()-80});

        //查询的收缩事件
        $(".collapse-link").click(function(){
            var o=$(this).closest("div.ibox"),e=$(this).find("i"),i=o.find("div.ibox-content");
            i.slideToggle(200),e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"),o.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){o.resize(),o.find("[id^=map-]").resize()},50)})

    })


    /**
     * 查询集中安置点名称，获取对应的下拉值
     */
    function queryCentralizedSettlements(){
        var aab301 = $("#aab301").val();
        $("#phd010").empty();
        $.ajax({
            url:"/aa10/queryCentralizedSettlementsByAab301",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:true,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"aab301":aab301},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                //请求成功时处理
                if(data != null && data != undefined){
                    var options ="";
                    options +="<option value=''>-- 请选择 --</option>";
                    for(var i=0;i<data.length;i++){
                        options +="<option value='"+data[i].cts001+"'>"+data[i].cts002+"</option>";
                    }
                    $("#phd010").append(options);
                }
            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }

    /**
     /*  * 复选框的点击事件，判断是否被选中
     *!/
     function checkTrueorFalse(id) {
        if($("#"+id).is(":checked")){   //说明复选框被选中了
            if($("#"+id).val() == '3'){ //说明选中的是  创业担保贷款
                $("#epp014").attr("readonly",false);//将input元素设置为readonly
            }else if($("#"+id).val() == '4'){//说明选中的是  创业补贴
                $("#epp015").attr("readonly",false);//将input元素设置为readonly
            }else if($("#"+id).val() == '6'){
                $("#eys019").attr("readonly",false)
            }else if($("#"+id).val() == '7'){
                $("#eys020").attr("readonly",false)
            }else if($("#"+id).val() == '8'){
                $("#eys021").attr("readonly",false)
            }
        }else{      //说明复选框没被选中了
            if($("#"+id).val() == '3'){ //说明没选中的是  创业担保贷款
                $("#epp014").attr("readonly",true);//将input元素设置为readonly
                $("#epp014").val("");//将input元素设置为readonly
            }else if($("#"+id).val() == '4'){//说明没选中的是  创业补贴
                $("#epp015").attr("readonly",true);//将input元素设置为readonly
                $("#epp015").val("");//将input元素设置为readonly
            }else if($("#"+id).val() == '6'){
                $("#eys019").attr("readonly",true);
                $("#eys019").val("");
            }else if($("#"+id).val() == '7'){
                $("#eys020").attr("readonly",true);
                $("#eys020").val("");
            }else if($("#"+id).val() == '8'){
                $("#eys021").attr("readonly",true);
                $("#eys021").val("");
            }
        }
    }*/


</script>
<script>

    /**
     * Created by len on 2019-04-28.
     */
    $(function () {

        //树节点的初始化事件
        $.fn.zTree.init($("#tree-div"), sys_perm_setting);

        //下拉框
        queryAllAa10list();


        $("#plf010").attr("readonly","readonly");
        $("#plf012").attr("readonly","readonly");
        //日期控件   就业起始日期
        laydate({
            elem: '#eys009', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   就业终止日期
        laydate({
            elem: '#eys010', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max:laydate.now(0, "YYYY-MM-DD"),
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   创业起始日期
        laydate({
            elem: '#epp006', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /* end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   创业终止日期
        laydate({
            elem: '#epp007', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*/!*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*!/*/
            }
        });

        //日期控件   培训起始日期
        laydate({
            elem: '#tsn007', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   培训终止日期
        laydate({
            elem: '#tsn008', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /* end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   培训后就业年月
        laydate({
            elem: '#tsn002', //对应id    就业起始日期
            format: 'YYYYMM', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /* end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });




        //日期控件   入学日期
        laydate({
            elem: '#ths005', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   毕业日期
        laydate({
            elem: '#ths006', //对应id    就业起始日期
            format: 'YYYY-MM-DD', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });


        //日期控件   毕业后就业日期
        laydate({
            elem: '#ths008', //对应id    就业起始日期
            format: 'YYYYMM', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   在苏就业年月
        laydate({
            elem: '#tsn013', //对应id    就业起始日期
            format: 'YYYYMM', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   毕在陕就业年月
        laydate({
            elem: '#tsn014', //对应id    就业起始日期
            format: 'YYYYMM', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });

        //日期控件   在陕创业年月
        laydate({
            elem: '#tsn015', //对应id    就业起始日期
            format: 'YYYYMM', //日期格式 // 分隔符可以任意定义，该例子表示只显示年月
            min: '1900-01-01', //设定最小日期为当前日期
            max: '2099-06-16', //最大日期
            festival: true, //显示节日
            istime: false,   //是否显示时分秒
            istoday: true, //是否是今天
            choose: function(datas){ //选择日期完毕的回调
                /*end.min = datas; //开始日选好后，重置结束日的最小日期
                 end.start = datas //将结束日的初始值设定为开始日*/
            }
        });




        //点击叉号调用的事件   贫困户modal
        $('#useradd').on('hide.bs.modal', function () {
            var aab301 = $("#aab301").val();
            $("#useradd input").val('');
            $("#phd013").prop("value","");
            $("#phd004").prop("value","");
            $("#phd014").prop("value","");
            $('#worker_table').dataTable().fnClearTable();//清空datatables
            $("#add_laodongli_div").hide();//劳动力
            $("#aab301").val(aab301);
        });

        //点击叉号调用的事件   贫困劳动力modal
        $('#workeradd').on('hide.bs.modal', function () {
            $("#workeradd input").val('');
            $("#plf007").prop("value","");
            $("#plf009").prop("value","");
            $("#plf011").prop("value","");
            $("#plf014").prop("value","");
            $("#plf018").prop("value","");
            $("#plf015").prop("value","");
            $("#plf012").prop("value","");
            $("#plf017").prop("value","");
            $('#jiuye_table').dataTable().fnClearTable();//清空datatables
            $('#chuangye_table').dataTable().fnClearTable();//清空datatables
            $('#peixun_table').dataTable().fnClearTable();//清空datatables
            $('#school_table').dataTable().fnClearTable();//清空datatables*
            $("#jineng").hide();    //技能

        });
        //点击叉号调用的事件   就业modal
        $('#jiuyeadd').on('hide.bs.modal', function () {
            var plf001 = $("#plf001").val();//劳动力id
            $("#jiuyeadd input").val('');
            $("#eys003").prop("value","");
            $("#eys012").prop("value","");
            $("#eys004").prop("value","");
            $("#eys007").prop("value","");
            $("#eys011").prop("value","");
            $("#eys002").val(plf001);
            $("#plf001").val(plf001);//劳动力id
            $("input[name='eys022']").attr("checked",false);//清空复选框
        });

        //点击叉号调用的事件   创业modal
        $('#chuangyeadd').on('hide.bs.modal', function () {
            var plf001 = $("#plf001").val();//劳动力id
            $("#chuangyeadd input").val('');
            $("#epp002").val(plf001);
        });
        //点击叉号调用的事件   培训modal
        $('#peixunadd').on('hide.bs.modal', function () {
            var plf001 = $("#plf001").val();//劳动力id
            $("#peixunadd input").val('');
            $("#tsn010").val(plf001);
        });
        //点击叉号调用的事件   技工院校modal
        $('#schooladd').on('hide.bs.modal', function () {
            var plf001 = $("#plf001").val();//劳动力id
            $("#schooladd input").val('');
            $("#ths002").val(plf001);
        });

        //设置div高度
        $("#ceshi_many").css("height", $("#workeradd").height()-260);

    })

    //树配置
    var sys_perm_setting = {
        edit: {
            drag:{
                prev: true,
                next: true,
                inner:true
            },
            enable: true,
            showRemoveBtn: false,
            showRenameBtn: false
        },
        view: {
            showLine: true,
            nameIsHTML: true
        },
        check: {
            enable: false,
            chkboxType:  { "Y": "s", "N": "s" } //chkboxType: { “Y”: “ps”, “N”: “ps” } Y 属性定义 checkbox 被勾选后的情况;N 属性定义 checkbox 取消勾选后的情况;“p” 表示操作会影响父级节点;“s” 表示操作会影响子级节点;请注意大小写，不要改变
        },
        data: {
            simpleData: {
                enable: true,
                pIdKey: "parentid"
            }
        },
        callback: {
            onClick: onClick,
            onAsyncSuccess:getTreeFirstNodeId
        },
        async: {
            enable: true,
            url: "/ztree/treedata",
            autoParam:["groupid"]
        }
    };

    //树节点的点击事件
    function onClick (event, treeId, treeNode, clickFlag) {
        $("#aab301").val(treeNode.groupid);
        $("#scan_xzqh").text(treeNode.name);
        loadpoor();
    }


    var treetype;         // 获取登录用户级别   树默认展开第一级节点
    function getTreeFirstNodeId(){
        var treeObj = $.fn.zTree.getZTreeObj("tree-div");
        var nodes = treeObj.getNodes();
        var firstNode = nodes[0];
        treeObj.expandNode(nodes[0], true);  treetype = firstNode.type;
        $("#aab301").val(firstNode.groupid);
        queryCentralizedSettlements();
        $("#scan_xzqh").text(firstNode.name);
    }


    var poorwork_datatable;//贫困户列表
    var worker_datatable;//劳动力列表
    var jiuye_datatable;//就业列表
    var chuangye_datatable;//创业列表
    var peixun_datatable;//培训列表
    var school_datatable;//技工院校列表
    var lang ;
    $(function () {

        //提示信息  初始化设置 一般不需要改
        lang = {
            "sProcessing": "处理中...",
            "sLengthMenu": "每页 _MENU_ 项",
            "sZeroRecords": "没有匹配结果",
            "sInfo": "当前显示第 _START_ 至 _END_ 项，共 _TOTAL_ 项。",
            "sInfoEmpty": "当前显示第 0 至 0 项，共 0 项",
            "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
            "sInfoPostFix": "",
            "sSearch": "搜索:",
            "sUrl": "",
            "sEmptyTable": "表中数据为空",
            "sLoadingRecords": "载入中...",
            "sInfoThousands": ",",
            "oPaginate": {
                "sFirst": "首页",
                "sPrevious": "上页",
                "sNext": "下页",
                "sLast": "末页",
                "sJump": "跳转"
            },
            "oAria": {
                "sSortAscending": ": 以升序排列此列",
                "sSortDescending": ": 以降序排列此列"
            }
        };

//加载贫困户表格
        // loadpoor();
    });


    /**
     * 加载贫困户表格
     */
    function  loadpoor() {
        //选中所有复选框
        $("input[name='checkname']").attr("checked","checked");
        //重要修改 表格内容的自定义，需要根据业务定制
        poorwork_datatable = $("#poorwork_table").dataTable({
            language:lang,  //提示信息
            autoWidth: true,  //禁用自动调整列宽
            ordering:false,//禁止排序
            scrollY:$(window).height()-200,//表窗口高度-100px
            scrollX:$(window).width(),
            destroy: true,
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: true,  //启用服务器端分页
            bLengthChange:false,//去掉下面的没有多少条
            aLengthMenu:[50,100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: true,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false   //包含上样式名‘nosort’的禁止排序
            }
            ],
            ajax: function (data, callback, settings) {

                $("#loading_div").modal('show');
                //封装请求参数
                var param = {};
                param.length= data.length;//页面显示记录条数，在页面显示每页显示多少项的时候
                param.start = data.start;//开始的记录序号
                param.pageIndex = (data.start / data.length);//当前页码
                param.phd002 = $("#phd002_scan").val();
                param.phd003 = $("#phd003_scan").val();
                param.helpyear = $("#helpyear_scan").val();
                param.aab301 = $("#aab301").val();
                param.phd006 = $("#phd006_scan").val();
                param.phd013 = $("#phd013_scan").val();
                param.phd014 = $("#phd014_scan").val();
                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorAccount/queryToBeCompletePoorByAab301",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {

                        //封装返回数据重要
                        var returnData = {};
                        //这里直接自行返回了draw计数器,应该由后台返回
                        //returnData.draw = data.draw;
                        //返回数据全部记录
                        returnData.recordsTotal = result.recordsTotal;
                        //后台不实现过滤功能，每次查询均视作全部结果
                        returnData.recordsFiltered = result.recordsFiltered;
                        //返回的数据列表
                        returnData.data = result.data;


                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);

                        //清除modal框
                        $("#loading_div").modal('hide');//清除加载动画
                    }
                });
            },
            //列表表头字段
            columns:[
                {"width":"50px",render : function(data, type, row, meta) {
                    //为了根据复选框获取到该行的id
                    var content = '<label>';
                    content += '<input type=\"checkbox\" class=\"ace\" name=\"checkitem\" value="'+row.phd001+'"/><span class=\"lbl\"></span>';
                    content += '&nbsp;&nbsp;'+row.rn;
                    content += '</label>';
                    return content;
                }
                },
               {"data":"phd001","width":"60px","render":function(data, type, full, meta){
                    return	data="<button onclick=\"updatePoorWork('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#useradd' >修 改</button> ";
                }},
                { "data": "aab301","width":"240px" },
                { "data": "phd002","width":"70px" },
                { "data": "phd013","width":"80px" },
                { "data": "phd014","width":"70px" },
                { "data": "phd004","width":"40px" },
                { "data": "phd003","width":"120px" },
                { "data": "phd008","width":"80px" },
                { "data": "havejiuyechuangyecount","width":"130px" },
                { "data": "yijiuyechuangyecount","width":"110px" },
                { "data": "yijiuyechuangyename","width":"120px" },
                { "data": "weijiuyechuangyecount" ,"width":"110px"},
                { "data": "weijiuyechuangyename","width":"120px" },
                { "data": "phd005" ,"width":"40px"},
                { "data": "phd006","width":"100px" },
                { "data": "phd010" ,"width":"150px"},
                { "data": "phd016" ,"width":"80px"},
                { "data": "phd012","width":"70px" }
                /*{ "data": "phd007" },*/
            ]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }

    /**
     * 点击添加贫困户按钮
     */
    function useradd_onclick() {
        //点击按钮检查是否已经点击到村级别，如果没有则提示，
        var aab301 =  $("#aab301").val();
        if(aab301.substring(9,12)=='000'){
            //说明不是村级
            swal({
                title: "请选择村，进行添加贫困户!",
                text: "您好,点击左侧树菜单，选择村进行添加操作",
                timer: 2000,
                showConfirmButton: false
            });
            return false;
        }else{


            $("#useradd").modal('show');
            $("#addupdate").text("新增贫困户信息");
            queryAab301Info(aab301,"aab301_id");
        }
    }

    /**
     * 点击添加劳动力按钮，加载表格
     * 劳动力表格
     */
    function addWorker(){
        //先判断贫困户信息是否已经登记，如果登记可以点击，否则不能点击，给个提示
        var plf002 = $("#plf002").val();
        if(plf002 != null && plf002 != ''){
            //打开模态框
            $("#workeradd").css({"display":"block","padding-left":"6px"});
            $("#workeradd_head").text("添加家庭成员信息");

        }else{
            //提示先保存贫困户信息
            swal({
                title: "请您先保存贫困户信息!",
                text: "您好！必须先保存贫困户信息",
                timer: 2000,
                showConfirmButton: false
            });

        }
    }

    //复选框的点击事件
    function check_onclick(){
        //获取选中的checkbox 的值
        var chk_value =[];//定义一个数组
        $('input[name="checkname"]:checked').each(function(){//遍历每一个名字为nodes的复选框，其中选中的执行函数
            chk_value.push($(this).val());//将选中的值添加到数组chk_value中
        });

        var notCheckedArr = []; //所有未选中的下复选框值
        $("input[name='checkname']:not(:checked)").each(function() {
            notCheckedArr.push($(this).val());
        });
        //将选中的值显示出来
        if(chk_value.length>0){
            for(var i=0;i<chk_value.length;i++){
                poorwork_datatable.column(chk_value[i]).visible(true)//将第一列的数据显示
            }
        }
        //将未选中的值隐藏起来
        if(notCheckedArr.length>0){
            for(var i=0;i<notCheckedArr.length;i++){
                poorwork_datatable.column(notCheckedArr[i]).visible(false)//将未选中的数据隐藏
            }
        }
    }


    /**
     * 查询贫困户信息
     */
    function searchPoor() {

        loadpoor();
    }

    /**
     * 加载劳动力表格
     */
    function loadWorker(){
//重要修改 表格内容的自定义，需要根据业务定制
        worker_datatable = $("#worker_table").dataTable({
            language:lang,  //提示信息
            destroy: true,
            autoWidth: false,  //禁用自动调整列宽
            ordering:false,//禁止排序
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: false,  //启用服务器端分页
            aLengthMenu:[10,20,50,100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            paging: false,//禁止分页
            info:false,
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {

                //封装请求参数
                var phd001 = $("#phd001").val();//贫困户model中的id
                var plf002 = "";
                if(phd001 != null && phd001 !=''){
                    plf002 = phd001;
                }
                $("#plf002").val(plf002);
                var param = {"aac002":plf002};

                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorwork/queryWorkerByPlf002",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {
                        //封装返回数据重要
                        var returnData = {};
                        //返回的数据列表
                        returnData.data = result;
                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);
                    }
                });
            },
            //列表表头字段
            columns: [
                { "data": "plf004" },
                { "data": "plf005" },
                { "data": "plf007" },
                { "data": "plf008" },
                { "data": "plf018" },
                { "data": "plf015" },
                { "data": "plf010" },
                { "data": "plf011" },
                { "data": "plf009" },
                { "data": "plf012" },
                {"data":"plf001","width":"60px", "render":function(data, type, full, meta){
                    return	data="<button onclick=\"updateWorker('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#workeradd' >修 改</button>  ";
                    //return	data="<button onclick=\"updateWorker('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#workeradd' >修 改</button>   <button  class='btn btn-sm btn-danger btn-del' onclick=\"delworker('"+data+"')\">删 除</button>  ";
                }}]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }



    /**
     * 保存贫困户信息
     */
    function savePoorWork(){
        if(checkAll_poor() == 1){
            $('#save_poor_work_btn').addClass('disabled');  //按鈕变灰
            $.ajax({
                url:"/poorwork/savePoorWork",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:$('#commentForm').serialize(),    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    /*$("input").val('');
                     $("#phd013").prop("value","");
                     $("#phd004").prop("value","");
                     $("#phd014").prop("value","");*/
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'update'){
                            loadpoor();
                            swal("修改成功！", "您已经成功修改了这条信息。", "success");
                        }else{
                            loadpoor();
                            $("#plf002").val(data);
                            $("#add_laodongli_div").show();
                            swal("保存成功！", "您已经成功保存了这条信息。", "success");
                        }
                        $('#save_poor_work_btn').removeClass('disabled');//按钮还原
                    }
                },
                complete:function(){
                    $('#save_poor_work_btn').removeClass('disabled');//按钮还原
                },
                error:function(){
                    //请求出错处理
                }
            });
        }

    }

    /**
     * 修改贫困户信息
     */
    function updatePoorWork(id){
        $('#save_poor_work_btn').removeClass('disabled');//按钮还原
        $("#addupdate").text("修改贫困户信息");
        $.ajax({
            url:"/poorwork/updatePoorWork",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"phd001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#phd001").val(data.phd001);
                $("#phd002").val(data.phd002);
                $("#phd003").val(data.phd003);
                $("#phd006").val(data.phd006);
                $("#phd005").val(data.phd005);
                $("#phd004").prop("value",data.phd004);
                $("#phd013").prop("value",data.phd013);
                $("#phd010").prop("value",data.phd010);
               // $("#phd014").prop("value",data.phd014);
                $("#phd017").prop("value", data.phd017);
                //$("#phd012").val(data.phd012);
                $("#phd007").val(data.phd007);
                $("#aab301").val(data.aab301);
                $("#phd011").val(data.phd011);//备注
                $("#phd016").prop("value",data.phd016);//是都残疾人
                queryAab301Info(data.aab301,"aab301_id");
                if(data.phd002 != null &&  data.phd002 != ''){
                    loadWorker();//加载劳动力表格
                }
                $("#add_laodongli_div").show();//显示出劳动力的添加按钮

            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }

    /**
     *删除贫困户信息
     */
    function delPoorwork(id){
        swal({
            title: "您确定要删除这条信息吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            cancelButtonText:"取消",
            confirmButtonText: "删除",
            closeOnConfirm: false
        }, function () {
            $.ajax({
                url:"/poorwork/delPoorWork",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:{"phd001":id},    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'yes'){
                            loadpoor();//加载劳动力表格
                            swal("删除成功！", "您已经永久删除了这条信息。", "success");
                        }else if(data == 'no'){
                            swal("删除失败！", "您未删除这条信息。", "fail");
                        }
                    }
                },
                complete:function(){

                },
                error:function(){
                    //请求出错处理
                }
            });

        });
    }


    //*******************************以下是劳动力信息**********************************************************


    /**
     * 户主也是劳动力的点击方法
     */
    function poorAlsoWorker() {
        //将户主的基本信息放在劳动力的下拉框中
        var id = $("#phd001").val();
        $.ajax({
            url:"/poorwork/updatePoorWork",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"phd001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#plf002").val(data.phd001);  //贫困户id
                $("#plf004").val(data.phd002);  //姓名
                $("#plf005").val(data.phd003);  //身份证号
                $("#plf007").prop("value",data.phd004);//性别
                $("#plf006").val(data.phd006);  //电话
                $("#plf008").val(data.phd005);  //年龄
                if(data.phd002 != null &&  data.phd002 != ''){
                    loadWorker();//加载劳动力表格
                }

            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }


    /**
     * 保存劳动力信息
     */
    function saveWorker(){
        if(checkAll_worker() == 1){
            $('#save_worker_btn').addClass('disabled');   $("#plf010").removeAttrs("disabled");             $("#plf011").removeAttrs("disabled");             $("#plf012").removeAttrs("disabled");             $("#plf024").removeAttrs("disabled");  //按鈕变灰
            $.ajax({
                url:"/poorwork/saveWorker?workeraab301="+$("#aab301").val(),    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:$('#workerForm').serialize(),    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'update'){
                            //请求完成的处理
                            var plf001 = $("#plf001").val();
                            updateWorker(plf001);
                            loadWorker();
                            swal("修改成功！", "您已经成功修改了这条信息。", "success");
                        }else{  //说明是新增
                            //请求完成的处理
                            loadWorker();
                            $("#plf001").val(data); //劳动力主键  因为要给劳动力下添加技能情况，所以需要劳动力主键信息
                            $("#jineng").show();
                            swal("保存成功！", "您已经成功保存了这条信息。", "success");
                        }
                        $('#save_worker_btn').removeClass('disabled');

                    }
                },
                complete:function(){
                    $('#save_worker_btn').removeClass('disabled');
                },
                error:function(){
                    //请求出错处理
                }
            });
        }

    }

    /**
     * 修改劳动力信息
     */
    function updateWorker(id){
        $('#save_worker_btn').removeClass('disabled');
        $("#plf001").val(id);
        //点击修改劳动力信息时，加载该劳动力下的所有表格
        loadJiuYeTable()//就业信息表格
        loadChuangYeTable()//创业信息表格
        loadPeiXunTable()//培训信息表格
        loadSchoolTable()//技工院校表格
        $("#workeradd_head").text("修改家庭成员信息");
        $.ajax({
            url:"/poorwork/updateWorker",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"plf001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#plf001").val(data.plf001);
                $("#plf002").val(data.plf002);
                $("#plf004").val(data.plf004);
                $("#plf005").val(data.plf005);
                $("#plf007").prop("value",data.plf007);
                $("#plf009").prop("value",data.plf009);
                $("#plf010").prop("value",data.plf010);
                $("#plf006").val(data.plf006);
                $("#plf011").prop("value",data.plf011);
                $("#plf012").prop("value",data.plf012);
                $("#plf017").prop("value",data.plf017);
                $("#plf026").val(data.plf026);
                $("#plf014").prop("value",data.plf014);
                $("#plf015").prop("value",data.plf015);
                $("#plf025").prop("value",data.plf025);
                $("#plf018").prop("value",data.plf018);
                $("#plf008").val(data.plf008);
                $("#plf019").val(data.plf019);
                $("#plf023").prop("value",data.plf023);
                $("#plf024").prop("value",data.plf024);
                changeplf018(data.plf018);
                changeplf015(data.plf015);

                $("#jineng").show();//显示出按钮
            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }



    /**
     *删除劳动力信息
     */
    function delworker(id){
        swal({
            title: "您确定要删除这条信息吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "删除",
            cancelButtonText:"取消",
            closeOnConfirm: false
        }, function () {
            $.ajax({
                url:"/poorwork/deleteWorker",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:{"plf001":id},    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'yes'){
                            worker_datatable.ajax.reload();
                            swal("删除成功！", "您已经永久删除了这条信息。", "success");
                        }else if(data == 'no'){
                            swal("删除失败！", "您未删除这条信息。", "fail");
                        }
                    }
                },
                complete:function(){

                },
                error:function(){
                    //请求出错处理
                }
            });

        });
    }

    //***************************************以下是就业信息*******************************************************

    /**
     * 加载就业信息表格
     * 就业表格
     */
    function loadJiuYeTable(){
        //重要修改 表格内容的自定义，需要根据业务定制
        jiuye_datatable = $("#jiuye_table").dataTable({
            destroy: true,
            autoWidth: false,  //禁用自动调整列宽
            ordering:false,//禁止排序
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: false,  //启用服务器端分页
            aLengthMenu:[10,20,50,100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            paging: false,//禁止分页
            info:false,
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {

                //封装请求参数
                var plf001 = $("#plf001").val();//劳动力id
                $("#eys002").val(plf001);
                var param = {"eys002":plf001};
                //根据劳动力id 查询就业信息
                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorwork/queryJiuYeByEys002",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {
                        //封装返回数据重要
                        var returnData = {};
                        //返回的数据列表
                        returnData.data = result;
                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);
                    }
                });
            },
            //列表表头字段
            columns: [
                { "data": "eys003" },
                { "data": "eys004" },
                { "data": "eys008" },
                { "data": "eys012" },
                { "data": "eys006" },
                { "data": "eys009" },
                { "data": "eys010" },
                { "data": "eys020" },
                { "data": "eys021" },
                { "data": "eys023" },
                {"data":"eys001", "render":function(data, type, full, meta){
                    if(treetype <= 3){     //说明是区县以上用户登录的，则可以删除
                        return	data="<button onclick=\"updateJiuye('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#jiuyeadd' >修 改</button>   <button  class='btn btn-sm btn-danger btn-del' onclick=\"deleteJiuye('"+data+"')\">删 除</button>  ";
                    }else{   //说明是区县一下人登录的，则只能修改
                        return	data="<button onclick=\"updateJiuye('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#jiuyeadd' >修 改</button>  ";
                    }                }}]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }

    /**
     *添加就业按钮的点击方法，给就业modal 隐藏域中房劳动力id
     */
    function jiuyeadd_onclick() {
        //先判断该人员是否劳动力，如果是劳动力则可以添加就业信息，不是则不可以添加
        var plf015= $("#plf015").val();//上学状态
        var plf025= $("#plf025").val();//成员变更
        var plf018 = $("#plf018").val();//劳动能力
        var plf008 = $("#plf008").val();//年龄
        if(plf015 =='1' || (plf025 !='' && plf025 !=null) || plf018=='03' || plf018=='04' || plf008>60 || plf008<16){
            //说明不是劳动力，则不能添加
            swal({
                title: "该人员不是劳动力不能添加帮扶信息!",
                text: "您好！该人员不是劳动力不能添加帮扶信息,请查看该人员【年龄】，【上学状态】，【成员变更】，【劳动能力】",
                timer: 2000,
                showConfirmButton: false
            });
            return false;
        }
        $("#jiuyeadd").modal('show');

        var plf001 = $("#plf001").val();//获取劳动力id
        $("#eys002").val(plf001);
    }


    /**
     * 保存就业信息
     */
    function saveJiuYe(){
        if(checkAll_jiuye() == 1){
            $('#save_jiuye_btn').addClass('disabled');  //按鈕变灰
            $.ajax({
                url:"/poorwork/saveJiuYe?jiuyeaab301="+$("#aab301").val(),    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:$('#jiuyeForm').serialize(),    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                    $("#jiuyeadd").modal('hide');
                },
                success:function(data){

                    var plf001 = $("#plf001").val();//劳动力id
                    $("#jiuyeadd input").val('');
                    $("#eys003").prop("value","");
                    $("#eys012").prop("value","");
                    $("#eys004").prop("value","");
                    $("#eys007").prop("value","");
                    $("#eys011").prop("value","");
                    $("#eys005").prop("value","");

                    $("#eys002").val(plf001);
                    $("#plf001").val(plf001);//劳动力id
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'update'){
                            //请求完成的处理
                            loadJiuYeTable();
                            swal("修改成功！", "您已经成功修改了这条信息。", "success");
                        }else{  //说明是新增
                            //请求完成的处理
                            loadJiuYeTable();
                            swal("保存成功！", "您已经成功保存了这条信息。", "success");
                        }
                    }

                    $('#save_jiuye_btn').removeClass('disabled');//按钮还原
                },
                complete:function(){
                    $('#save_jiuye_btn').removeClass('disabled');//按钮还原
                },
                error:function(){
                    //请求出错处理
                }
            });
        }

    }

    /**
     * 修改就业信息
     */
    function updateJiuye(id){
        $('#save_jiuye_btn').removeClass('disabled');//按钮还原
        $("#jiuye_head").text("修改就业信息");
        $.ajax({
            url:"/poorwork/updateJiuye",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"eys001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#eys001").val(data.eys001);
                $("#eys002").val(data.eys002);
                $("#eys003").prop("value",data.eys003);
                $("#eys012").prop("value",data.eys012);
                $("#eys004").prop("value",data.eys004);
                $("#eys015").val(data.eys015);
                $("#eys006").val(data.eys006);
                $("#eys007").prop("value",data.eys007);
                $("#eys005").val(data.eys005);
                $("#eys011").prop("value", data.eys011);$("#eys024").prop("value", data.eys024);
                $("#eys009").val(data.eys009);
                $("#eys010").val(data.eys010);
                $("#eys013").val(data.eys013);
                $("#eys014").val(data.eys014);
                $("#eys008").val(data.eys008);//就业地址
                $("#eys019").val(data.eys019);
                $("#eys020").val(data.eys020);
                $("#eys021").val(data.eys021);
                $("#eys016").val(data.eys016);
                $("#eys017").val(data.eys017);
                $("#eys018").val(data.eys018);
                if(data.eys022 != null && data.eys022 !=''){
                    var eys022 = data.eys022;
                    var flavors = eys022.split(",");
                    //对复选框进行选中操作
                    $.each(flavors,function(i,item){
                        $("input[name='eys022'][value="+item+"]").attr("checked","checked");
                    });
                }

                if(data.eys019 !=null && data.eys019 !=''){
                    $("#eys019").attr("readonly",false);//将input元素设置为readonly
                }
                if(data.eys020 !=null && data.eys020 !=''){
                    $("#eys020").attr("readonly",false);//将input元素设置为readonly
                }
                if(data.eys021 !=null && data.eys021 !=''){
                    $("#eys021").attr("readonly",false);//将input元素设置为readonly
                }

                if(data.eys011=="5" || data.eys011=="6" || data.eys011=="7"){
                    $("#jiuye_type").show();
                }else{
                    $("#jiuye_type").hide();
                }


            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }

    /**
     * 就业
     * 点击清空按钮
     */
    function clean_input_jiuye() {
        var eys001 = $("#eys001").val();
        var plf001 = $("#plf001").val();//劳动力id
        $("#jiuyeadd input").val('');
        $("input[name='eys022']").attr("checked",false);//清空复选框
        $("#eys003").prop("value","");
        $("#eys012").prop("value","");
        $("#eys004").prop("value","");
        $("#eys007").prop("value","");
        $("#eys011").prop("value","");
        $("#eys005").prop("value","");
        $("#eys002").val(plf001);
        $("#plf001").val(plf001);//劳动力id
        if(eys001 != null && eys001 !=''){
            updateJiuye(eys001);
        }else{
        }

    }

    /**
     *删除就业信息
     */
    function deleteJiuye(id){
        swal({
            title: "您确定要删除这条信息吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "删除",
            cancelButtonText:"取消",
            closeOnConfirm: false
        }, function () {
            $.ajax({
                url:"/poorwork/deleteJiuye",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:{"eys001":id},    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'yes'){
                            loadJiuYeTable();
                            swal("删除成功！", "您已经永久删除了这条信息。", "success");
                        }else if(data == 'no'){
                            swal("删除失败！", "您未删除这条信息。", "fail");
                        }
                    }
                },
                complete:function(){

                },
                error:function(){
                    //请求出错处理
                }
            });

        });
    }

    //************************************以下是创业信息***************************************************************


    function loadChuangYeTable() {
        //重要修改 表格内容的自定义，需要根据业务定制
        chuangye_datatable = $("#chuangye_table").dataTable({
            destroy: true,
            autoWidth: false,  //禁用自动调整列宽
            ordering:false,//禁止排序
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: false,  //启用服务器端分页
            aLengthMenu:[10,20,50,100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            paging: false,//禁止分页
            info:false,
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {

                //封装请求参数
                var plf001 = $("#plf001").val();//劳动力id
                $("#epp002").val(plf001);
                var param = {"epp002":plf001};
                //根据劳动力id 查询就业信息
                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorwork/queryEntrepreneurshipByEpp002",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {
                        //封装返回数据重要
                        var returnData = {};
                        //返回的数据列表
                        returnData.data = result;
                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);
                    }
                });
            },
            //列表表头字段
            columns: [
                {"data": "epp003"},
                {"data": "epp004"},
                {"data": "epp005"},
                {"data": "epp009"},
                {"data": "epp006"},
                {"data": "epp014"},
                {"data": "epp015"},
                {"data": "epp016"},
                {"data":"epp001", "render":function(data, type, full, meta){
                    if(treetype <= 3){     //说明是区县以上用户登录的，则可以删除
                        return	data="<button onclick=\"updateChuangye('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#chuangyeadd' >修 改</button>   <button  class='btn btn-sm btn-danger btn-del' onclick=\"delChuangye('"+data+"')\">删 除</button>  ";
                    }else{   //说明是区县一下人登录的，则只能修改
                        return	data="<button onclick=\"updateChuangye('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#chuangyeadd' >修 改</button> ";
                    }                }}]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }


    /**
     *添加创业按钮的点击方法，给就业modal 隐藏域中房劳动力id
     */
    function chuangyeadd_onclick() {
        //先判断该人员是否劳动力，如果是劳动力则可以添加创业信息，不是则不可以添加
        var plf015= $("#plf015").val();//上学状态
        var plf025= $("#plf025").val();//成员变更
        var plf018 = $("#plf018").val();//劳动能力
        var plf008 = $("#plf008").val();//年龄
        if(plf015 =='1' || (plf025 !='' && plf025 !=null) || plf018=='03' || plf018=='04' || plf008>60 || plf008<16){
            //说明不是劳动力，则不能添加
            swal({
                title: "该人员不是劳动力不能添加帮扶信息!",
                text: "您好！该人员不是劳动力不能添加帮扶信息,请查看该人员【年龄】，【上学状态】，【成员变更】，【劳动能力】",
                timer: 2000,
                showConfirmButton: false
            });
            return false;
        }
        $("#chuangyeadd").modal('show');
        var plf001 = $("#plf001").val();//获取劳动力id
        $("#epp002").val(plf001);
    }


    /**
     * 保存创业信息
     */
    function saveChuangye(){
        if(checkAll_chuangye() == 1){
            $('#save_chuangye_btn').addClass('disabled');  //按鈕变灰
            $.ajax({
                url:"/poorwork/saveChuangYe?chuangyeaab301="+$("#aab301").val(),    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:$('#chuangyeForm').serialize(),    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                    $("#chuangyeadd").modal('hide');
                },
                success:function(data){
                    // $("#chuangyeadd").modal('hide');
                    //请求成功时处理
                    if(data != null && data != undefined){
                        var plf001 = $("#plf001").val();//劳动力id
                        $("#chuangyeadd input").val('');
                        $("#epp002").val(plf001);
                        if(data == 'update'){
                            //请求完成的处理
                            loadChuangYeTable();
                            swal("修改成功！", "您已经成功修改了这条信息。", "success");
                        }else{  //说明是新增
                            //请求完成的处理
                            loadChuangYeTable();
                            swal("保存成功！", "您已经成功保存了这条信息。", "success");
                        }
                    }
                    // $("#chuangyeadd").modal('hide');
                    $('#save_chuangye_btn').removeClass('disabled');//按钮还原
                },
                complete:function(){
                    $('#save_chuangye_btn').removeClass('disabled');//按钮还原
                },
                error:function(){
                    //请求出错处理
                }
            });
        }

    }

    /**
     * 修改创业信息
     */
    function updateChuangye(id){
        $('#save_chuangye_btn').removeClass('disabled');//按钮还原
        $("#chuangye_head").text("修改创业信息");
        $.ajax({
            url:"/poorwork/updateChuangYe",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"epp001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#epp001").val(data.epp001);
                $("#epp002").val(data.epp002);
                $("#epp003").prop("value",data.epp003);
                $("#epp004").val(data.epp004);
                $("#epp005").val(data.epp005);
                $("#epp006").val(data.epp006);
                $("#epp007").val(data.epp007);
                $("#epp008").val(data.epp008);
                $("#epp009").val(data.epp009);
                $("#epp010").val(data.epp010);
                $("#epp011").val(data.epp011);
                $("#epp012").val(data.epp012);
                var epp013 = data.epp013;
                $("#epp014").val(data.epp014);
                $("#epp015").val(data.epp015);
                if(epp013 != null && epp013 !=''){
                    var flavors = epp013.split(",");
                    //对复选框进行选中操作
                    $.each(flavors,function(i,item){
                        $("input[name='epp013'][value="+item+"]").attr("checked","checked");
                    });
                }
                if(data.epp014 !=null && data.epp014 !=''){
                    $("#epp014").attr("readonly",false);//将input元素设置为readonly
                }
                if(data.epp015 !=null && data.epp015 !=''){
                    $("#epp015").attr("readonly",false);//将input元素设置为readonly
                }

            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }


    /**
     * 创业
     * 点击清空按钮
     */
    function clean_input_chuangye() {
        var epp001 = $("#epp001").val();
        var plf001 = $("#plf001").val();//劳动力id
        $("#chuangyeadd input").val('');
        $("#epp002").val(plf001);
        if(epp001 != null && epp001 !=''){
            updateChuangye(epp001);
        }else{
        }
    }


    /**
     *删除创业信息
     */
    function delChuangye(id){
        swal({
            title: "您确定要删除这条信息吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "删除",
            cancelButtonText:"取消",
            closeOnConfirm: false
        }, function () {
            $.ajax({
                url:"/poorwork/deleteChuangYe",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:{"epp001":id},    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'yes'){
                            loadChuangYeTable();
                            swal("删除成功！", "您已经永久删除了这条信息。", "success");
                        }else if(data == 'no'){
                            swal("删除失败！", "您未删除这条信息。", "fail");
                        }
                    }
                },
                complete:function(){

                },
                error:function(){
                    //请求出错处理
                }
            });

        });
    }

    //****************************************以下是培训信息**************************************************************


    /**
     * 加载培训表格
     * 培训表格
     */
    function loadPeiXunTable(){
        //重要修改 表格内容的自定义，需要根据业务定制
        peixun_datatable = $("#peixun_table").dataTable({
            destroy: true,
            autoWidth: false,  //禁用自动调整列宽
            ordering:false,//禁止排序
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: false,  //启用服务器端分页
            aLengthMenu:[10,20,50,100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            paging: false,//禁止分页
            info:false,
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {

                //封装请求参数
                var plf001 = $("#plf001").val();//劳动力id
                $("#tsn010").val(plf001);
                var param = {"tsn010":plf001};
                //根据劳动力id 查询就业信息
                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorwork/queryTrainingSituationByTsn010",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {
                        //封装返回数据重要
                        var returnData = {};
                        //返回的数据列表
                        returnData.data = result;
                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);
                    }
                });
            },
            //列表表头字段
            columns: [
                { "data": "tsn003" },
                { "data": "tsn004" },
                { "data": "tsn005" },
                { "data": "tsn006" },
                { "data": "tsn007" },
                { "data": "tsn008" },
                { "data": "tsn002" },
                {"data":"tsn001", "render":function(data, type, full, meta){
                    if(treetype <= 3){     //说明是区县以上用户登录的，则可以删除
                        return	data="<button onclick=\"updatePeiXun('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#peixunadd' >修 改</button>   <button  class='btn btn-sm btn-danger btn-del' onclick=\"deletePeiXun('"+data+"')\">删 除</button>  ";
                    }else{   //说明是区县一下人登录的，则只能修改
                        return	data="<button onclick=\"updatePeiXun('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#peixunadd' >修 改</button>  ";
                    }                }}]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }


    /**
     *添加培训按钮的点击方法，给就业modal 隐藏域中房劳动力id
     */
    function peixunadd_onclick() {
        //先判断该人员是否劳动力，如果是劳动力则可以添加培训信息，不是则不可以添加
        var plf015= $("#plf015").val();//上学状态
        var plf025= $("#plf025").val();//成员变更
        var plf018 = $("#plf018").val();//劳动能力
        var plf008 = $("#plf008").val();//年龄
        if(plf015 =='1' || (plf025 !='' && plf025 !=null) || plf018=='03' || plf018=='04' || plf008>60 || plf008<16){
            //说明不是劳动力，则不能添加
            swal({
                title: "该人员不是劳动力不能添加帮扶信息!",
                text: "您好！该人员不是劳动力不能添加帮扶信息,请查看该人员【年龄】，【上学状态】，【成员变更】，【劳动能力】",
                timer: 2000,
                showConfirmButton: false
            });
            return false;
        }
        $("#peixunadd").modal('show');
        var plf001 = $("#plf001").val();//获取劳动力id
        $("#tsn010").val(plf001);
    }


    /**
     * 保存培训信息
     */
    function savePeiXun(){
        if(checkAll_peixun() == 1){
            $('#save_peixun_btn').addClass('disabled');  //按鈕变灰
            $.ajax({
                url:"/poorwork/savePeiXun?peixunaab301="+$("#aab301").val(),    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:$('#peixunForm').serialize(),    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                    $("#peixunadd").modal('hide');
                },
                success:function(data){
                    // $("#peixunadd").modal('hide');
                    //请求成功时处理
                    if(data != null && data != undefined){
                        var plf001 = $("#plf001").val();//劳动力id
                        $("#peixunadd input").val('');
                        $("#tsn010").val(plf001);

                        if(data == 'update'){
                            //请求完成的处理
                            loadPeiXunTable();
                            swal("修改成功！", "您已经成功修改了这条信息。", "success");
                        }else{  //说明是新增
                            //请求完成的处理
                            loadPeiXunTable();
                            swal("保存成功！", "您已经成功保存了这条信息。", "success");
                        }
                        // $("#peixunadd").modal('hide');
                        $('#save_peixun_btn').removeClass('disabled');//按钮还原
                    }
                },
                complete:function(){
                    $('#save_peixun_btn').removeClass('disabled');//按钮还原
                },
                error:function(){
                    //请求出错处理
                }
            });
        }

    }

    /**
     * 修改培训信息
     */
    function updatePeiXun(id){
        $('#save_peixun_btn').removeClass('disabled');//按钮还原
        $("#peixun_head").text("修改培训信息");
        $.ajax({
            url:"/poorwork/updatePeiXun",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"tsn001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#tsn001").val(data.tsn001);
                $("#tsn010").val(data.tsn010);
                $("#tsn005").val(data.tsn005);
                $("#tsn006").val(data.tsn006);
                $("#tsn003").prop("value",data.tsn003);
                $("#tsn004").prop("value",data.tsn004);
                $("#tsn007").val(data.tsn007);
                $("#tsn008").val(data.tsn008);
                $("#tsn011").val(data.tsn011)
                $("#tsn002").val(data.tsn002)
                $("#tsn012").prop("value",data.tsn012);
                $("#tsn013").val(data.tsn013)
                $("#tsn014").val(data.tsn014)
                $("#tsn015").val(data.tsn015)
                $("#tsn016").val(data.tsn016)
                changetsn003(data.tsn003);
                tsn012change(data.tsn012);
                $("#tsn009").val(data.tsn009)
            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }

    /**
     * 培训
     * 点击清空按钮
     */
    function clean_input_peixun() {
        var tsn001 = $("#tsn001").val();
        var plf001 = $("#plf001").val();//劳动力id
        $("#peixunadd input").val('');
        $("#tsn010").val(plf001);
        if(tsn001 != null && tsn001 !=''){
            updatePeiXun(tsn001);
        }else{
        }
    }

    /**
     *删除培训信息
     */
    function deletePeiXun(id){
        swal({
            title: "您确定要删除这条信息吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "删除",
            cancelButtonText:"取消",
            closeOnConfirm: false
        }, function () {
            $.ajax({
                url:"/poorwork/deletePeiXun",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:{"tsn001":id},    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'yes'){
                            loadPeiXunTable();
                            swal("删除成功！", "您已经永久删除了这条信息。", "success");
                        }else if(data == 'no'){
                            swal("删除失败！", "您未删除这条信息。", "fail");
                        }
                    }
                },
                complete:function(){

                },
                error:function(){
                    //请求出错处理
                }
            });

        });
    }

    //***************************************以下是技工院校信息***********************************************************

    /**
     * 加载技工院校息表格
     * 技工表格
     */
    function loadSchoolTable(){
        //重要修改 表格内容的自定义，需要根据业务定制
        school_datatable = $("#school_table").dataTable({
            destroy: true,
            autoWidth: false,  //禁用自动调整列宽
            ordering:false,//禁止排序
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: false,  //启用服务器端分页
            aLengthMenu:[10,20,50,100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            paging: false,//禁止分页
            info:false,
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {

                //封装请求参数
                var plf001 = $("#plf001").val();//劳动力id
                $("#ths002").val(plf001);
                var param = {"ths002":plf001};
                //根据劳动力id 查询就业信息
                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorwork/queryTechnicalSchoolsByThs002",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {
                        //封装返回数据重要
                        var returnData = {};
                        //返回的数据列表
                        returnData.data = result;
                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);
                    }
                });
            },
            //列表表头字段
            columns: [
                { "data": "ths003" },
                { "data": "ths004" },
                { "data": "ths007" },
                { "data": "ths005" },
                { "data": "ths006" },
                { "data": "ths008" },
                {"data":"ths001", "render":function(data, type, full, meta){
                    if(treetype <= 3){     //说明是区县以上用户登录的，则可以删除
                        return	data="<button onclick=\"updateSchool('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#schooladd' >修 改</button>   <button  class='btn btn-sm btn-danger btn-del' onclick=\"deleteSchool('"+data+"')\">删 除</button>  ";
                    }else{   //说明是区县一下人登录的，则只能修改
                        return	data="<button onclick=\"updateSchool('"+data+"')\"  class='btn btn-sm btn-primary btn-edit' data-toggle='modal' data-target='#schooladd' >修 改</button> ";
                    }                }}]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }


    /**
     *添加技工院校按钮的点击方法，给就业modal 隐藏域中房劳动力id
     */
    function schooladd_onclick() {
        var plf001 = $("#plf001").val();//获取劳动力id
        $("#ths002").val(plf001);
    }

    /**
     * 保存技工院校信息
     */
    function saveSchool(){
        if(checkAll_school() == 1){
            $('#save_school_btn').addClass('disabled');  //按鈕变灰
            $.ajax({
                url:"/poorwork/saveSchool?schoolaab301="+$("#aab301").val(),    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:$('#schoolForm').serialize(),    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                    $("#schooladd").modal('hide');
                },
                success:function(data){
                    // $("#schooladd").modal('hide');
                    var plf001 = $("#plf001").val();//劳动力id
                    $("#schooladd input").val('');
                    $("#ths002").val(plf001);
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'update'){
                            //请求完成的处理
                            loadSchoolTable();
                            swal("修改成功！", "您已经成功修改了这条信息。", "success");
                        }else{  //说明是新增
                            //请求完成的处理
                            loadSchoolTable();
                            swal("保存成功！", "您已经成功保存了这条信息。", "success");
                        }
                        // $("#schooladd").modal('hide');
                        $('#save_school_btn').removeClass('disabled');//按钮还原

                    }
                },
                complete:function(){
                    $('#save_school_btn').removeClass('disabled');//按钮还原
                },
                error:function(){
                    //请求出错处理
                }
            });
        }
    }

    /**
     * 修改技工院校信息
     */
    function updateSchool(id){
        $('#save_school_btn').removeClass('disabled');//按钮还原
        $("#school_head").text("修改技工院校信息");
        $.ajax({
            url:"/poorwork/updateSchool",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"ths001":id},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                $("#ths001").val(data.ths001);
                $("#ths002").val(data.ths002);
                $("#ths003").val(data.ths003);
                $("#ths004").val(data.ths004);
                $("#ths005").val(data.ths005);
                $("#ths006").val(data.ths006);
                $("#ths007").val(data.ths007);
                $("#ths008").val(data.ths008);
                $("#ths009").prop("value",data.ths009);
                $("#ths010").prop("value",data.ths010);
                $("#ths011").val(data.ths011);
                $("#ths013").val(data.ths013);
                $("#ths014").val(data.ths014);
                $("#ths015").val(data.ths015);
                $("#ths016").val(data.ths016);
            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }

    /**
     * 技工院校
     * 点击清空按钮
     */
    function clean_input_school() {
        var ths001 = $("#ths001").val();
        var plf001 = $("#plf001").val();//劳动力id
        $("#schooladd input").val('');
        $("#ths002").val(plf001);
        $("#ths009").prop("value","");
        $("#ths010").prop("value","");
        if(ths001 != null && ths001 !=''){
            updateSchool(ths001);
        }else{

        }
    }


    /**
     *删除技工院校信息
     */
    function deleteSchool(id){
        swal({
            title: "您确定要删除这条信息吗",
            text: "删除后将无法恢复，请谨慎操作！",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "删除",
            cancelButtonText:"取消",
            closeOnConfirm: false
        }, function () {
            $.ajax({
                url:"/poorwork/deleteSchool",    //请求的url地址
                dataType:"text",   //返回格式为json
                async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                data:{"ths001":id},    //参数值
                type:"POST",   //请求方式
                beforeSend:function(){
                    //请求前的处理
                },
                success:function(data){
                    //请求成功时处理
                    if(data != null && data != undefined){
                        if(data == 'yes'){
                            loadSchoolTable();
                            swal("删除成功！", "您已经永久删除了这条信息。", "success");
                        }else if(data == 'no'){
                            swal("删除失败！", "您未删除这条信息。", "fail");
                        }
                    }
                },
                complete:function(){

                },
                error:function(){
                    //请求出错处理
                }
            });

        });
    }



    /**
     * 查询参数，获取对应的下拉值
     */
    function queryParam(aaa100,id){
        $("#"+id).empty();
        $.ajax({
            url:"/aa10/queryAa10",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:true,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"aaa100":aaa100},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                //请求成功时处理
                if(data != null && data != undefined){
                    var options ="";
                    options +="<option value=''>-- 请选择 --</option>";
                    for(var i=0;i<data.length;i++){
                        options +="<option value='"+data[i].aaa102+"'>"+data[i].aaa103+"</option>";
                    }
                    $("#"+id).append(options);
                }
            },
            complete:function(){
                //请求完成的处理
            },
            error:function(){
                //请求出错处理
            }
        });
    }




    //贫困户   保存前校验必填项是否都填写
    function checkAll_poor() {
        var phd002 = $("#phd002").val();
        var phd003 = $("#phd003").val();
        var phd006 = $("#phd006").val();
        //var phd012 = $("#phd012").val();//认定年度
        var phd013 = $("#phd013").val();
        var phd010 = $("#phd010").val();//集中安置点名称
        var phd007 = $("#phd007").val();
        var flag = 0;
        if(phd002 =="" || phd002 == null){
            swal({
                title: "请输入户主姓名!",
                text: "您好！户主姓名不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(phd003 =="" || phd003 == null){
            swal({
                title: "请输入身份证号!",
                text: "您好！身份证号不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(phd006 =="" || phd006 == null){
            swal({
                title: "请输入户主电话!",
                text: "您好！户主电话不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        /*if (phd012 == "" || phd012 == null) {
            swal({
                title: "请输入认定年度!",
                text: "您好！认定年度不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }*/
        if(phd013 =="" || phd013 == null){
            swal({
                title: "请输入易地扶贫搬迁!",
                text: "您好！易地扶贫搬迁不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(phd013 =="1"){   //说明选中的是   易地搬迁
            if(phd010 =="" || phd010 == null){
                swal({
                    title: "请输入安置点名称!",
                    text: "您好！安置点名称不能为空",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }
        if(phd007 =="" || phd007 == null){
            swal({
                title: "请输入详细住址!",
                text: "您好！详细住址不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        flag = 1;
        return flag;
    }


    //劳动力   保存前校验必填项是否都填写
    function checkAll_worker() {
        var plf004 = $("#plf004").val();
        var plf005 = $("#plf005").val();
        var plf006 = $("#plf006").val();
        //var plf009 = $("#plf009").val();
        var plf011 = $("#plf011").val();
        var plf017 = $("#plf017").val();
        var plf018 = $("#plf018").val();//劳动能力
        var plf010 = $("#plf010").val();
        var plf015 = $("#plf015").val();//上学状态
        var plf025 = $("#plf025").val();//成员变更
        var flag = 0;
        if (plf004 == "" || plf004 == null) {
            swal({
                title: "请输入劳动力姓名!",
                text: "您好！劳动力姓名不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (plf018 == "" || plf018 == null) {
            swal({
                title: "请输入劳动能力!",
                text: "您好！劳动能力不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }else if(plf018 !="03" && plf018 !="04" && plf015 =='0' && plf015 != ""){   //说明是死亡或者无劳动能力
            if (plf011 == "" || plf011 == null) {
                swal({
                    title: "请输入就创业状态!",
                    text: "您好！就创业状态不能为空",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }
        if (plf005 == "" || plf005 == null) {
            swal({
                title: "请输入身份证号!",
                text: "您好！身份证号不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (plf006 == "" || plf006 == null) {
            swal({
                title: "请输入劳动力电话!",
                text: "您好！劳动力电话不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (plf015 == "" || plf015 == null) {
            swal({
                title: "请输入上学状态!",
                text: "您好！上学状态不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }else if(plf015 =='null' && plf015 != "" && plf018 !="03" && plf018 !="04"){
            if (plf011 == "" || plf011 == null) {
                swal({
                    title: "请输入就创业状态!",
                    text: "您好！就创业状态不能为空",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }

        /* if (plf009 == "" || plf009 == null) {
         swal({
         title: "请输入文化程度!",
         text: "您好！文化程度不能为空",
         timer: 2000,
         showConfirmButton: false
         });
         return flag;
         }*/
        /*if(plf025 == null || plf025 ==''){
         if(plf015 == null || plf015 ==''){
         if(plf018 != '03' && plf018 !='04'){
         if (plf011 == "" || plf011 == null) {
         swal({
         title: "请输入就业创业状态!",
         text: "您好！就业创业状态不能为空",
         timer: 2000,
         showConfirmButton: false
         });
         return flag;
         }
         if(plf011 == '1'){
         if (plf010 == "" || plf010 == null) {
         swal({
         title: "请输入就业创业意愿!",
         text: "您好！就业创业意愿不能为空",
         timer: 2000,
         showConfirmButton: false
         });
         return flag;
         }
         }

         }
         }
         }*/



        flag = 1;
        return flag;
    }


    //就业信息   保存前校验必填项是否都填写
    function checkAll_jiuye() {
        var eys003 = $("#eys003").val();
        var eys012 = $("#eys012").val();
        var eys004 = $("#eys004").val();
        var eys009 = $("#eys009").val();
        var eys008 = $("#eys008").val();
        var eys015 = $("#eys015").val();
        var eys010 = $("#eys010").val();
        var flag = 0;

        if (eys009 != "" && eys009 != null) {
            //判断格式是否正确
            var month = eys009.split("-")[1];
            var day = eys009.split("-")[2];
            var trueorfalse = new Date(eys009).getDate()==eys009.substring(eys009.length-2);
            if(month.length == 2 && day.length == 2 && trueorfalse == true){

            }else{
                swal({
                    title: "就业日期起始格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }

        }

        if (eys010 != "" && eys010 != null) {
            //判断格式是否正确
            var month = eys010.split("-")[1];
            var day = eys010.split("-")[2];
            var trueorfalse = new Date(eys010).getDate()==eys010.substring(eys010.length-2);
            if(month.length == 2 && day.length == 2 && trueorfalse == true){

            }else{
                swal({
                    title: "就业日期终止格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }

        }
        if(eys003 =="" || eys003 == null){
            swal({
                title: "请输入就业渠道!",
                text: "您好！就业渠道不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(eys012 =="" || eys012 == null){
            swal({
                title: "请输入就业地域!",
                text: "您好！就业地域不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(eys004 =="" || eys004 == null){
            swal({
                title: "请输入就业类型!",
                text: "您好！就业类型不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }else{
            if(eys004 == '3'){//如果是农业就业，则上年度农业人均年纯收入  不能为空
               /* if(eys015 != '' && eys015 != null){
                    if(eys015 < 3100){
                        swal("您好！上年度农业人均年纯收入必须大于3100!");
                        return flag;
                    }
                }else{
                    swal("您好！农业就业，必须输入农业人均年纯收入并且金额必须大于3100!");
                    return flag;
                }*/

            }
        }
        if(eys009 =="" || eys009 == null){
            swal({
                title: "请输入就业起始日期!",
                text: "您好！就业起始日期不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(eys008 =="" || eys008 == null){
            swal({
                title: "请输入就业地址!",
                text: "您好！就业地址不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }

        flag = 1;
        return flag;
    }


    //创业信息   保存前校验必填项是否都填写
    function checkAll_chuangye() {
        var epp003 = $("#epp003").val();
        var epp005 = $("#epp005").val();
        var epp006 = $("#epp006").val();
        var epp007 = $("#epp007").val();
        var flag = 0;
        if(epp003 =="" || epp003 == null){
            swal({
                title: "请输入创业项目!",
                text: "您好！创业项目不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(epp005 =="" || epp005 == null){
            swal({
                title: "请输入创业地址!",
                text: "您好！创业地址不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (epp006 == "" || epp006 == null) {
            swal({
                title: "请输入创业起始日期!",
                text: "您好！创业起始日期不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }else{
            //判断格式是否正确
            var month = epp006.split("-")[1];
            var day = epp006.split("-")[2];
            var trueorfalse = new Date(epp006).getDate()==epp006.substring(epp006.length-2);
            if(month.length == 2 && day.length == 2 && trueorfalse == true){

            }else{
                swal({
                    title: "创业起始日期格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }

        if (epp007 != "" && epp007 != null) {
            //判断格式是否正确
            var month = epp007.split("-")[1];
            var day = epp007.split("-")[2];
            var trueorfalse = new Date(epp007).getDate()==epp007.substring(epp007.length-2);
            if(month.length == 2 && day.length == 2 && trueorfalse == true){

            }else{
                swal({
                    title: "创业终止日期格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }

        flag = 1;
        return flag;
    }


    //培训信息   保存前校验必填项是否都填写
    function checkAll_peixun() {
        var tsn005 = $("#tsn005").val();
        var tsn006 = $("#tsn006").val();
        var tsn003 = $("#tsn003").val();
        var tsn007 = $("#tsn007").val();
        var tsn008 = $("#tsn008").val();
        var flag = 0;
        if(tsn005 =="" || tsn005 == null){
            swal({
                title: "请输入培训单位!",
                text: "您好！培训单位不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(tsn006 =="" || tsn006 == null){
            swal({
                title: "请输入培训地址!",
                text: "您好！培训地址不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if(tsn003 =="" || tsn003 == null){
            swal({
                title: "请输入培训类型!",
                text: "您好！培训类型不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (tsn007 == "" || tsn007 == null) {
            swal({
                title: "请输入培训起始日期!",
                text: "您好！培训起始日期不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }else{
            //判断格式是否正确
            var month = tsn007.split("-")[1];
            var day = tsn007.split("-")[2];
            var trueorfalse = new Date(tsn007).getDate()==tsn007.substring(tsn007.length-2);
            if(month.length == 2 && day.length == 2 && trueorfalse == true){

            }else{
                swal({
                    title: "培训起始日期格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }
        if (tsn008 != "" && tsn008 != null) {
            //判断格式是否正确
            var month = tsn008.split("-")[1];
            var day = tsn008.split("-")[2];
            var trueorfalse = new Date(tsn008).getDate()==tsn008.substring(tsn008.length-2);
            if(month.length == 2 && day.length == 2 && trueorfalse == true){

            }else{
                swal({
                    title: "培训终止日期格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }

        flag = 1;
        return flag;
    }


    //技工院校   保存前校验必填项是否都填写
    function checkAll_school() {
        var ths003 = $("#ths003").val();
        var ths004 = $("#ths004").val();
        var ths005 = $("#ths005").val();
        var ths009 = $("#ths009").val();
        var ths010 = $("#ths010").val();
        var ths008 = $("#ths008").val();//毕业后就业年月
        var ths006 = $("#ths006").val();
        var flag = 0;
        if (ths003 == "" || ths003 == null) {
            swal({
                title: "请输入技工院校名称!",
                text: "您好！技工院校名称不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (ths004 == "" || ths004 == null) {
            swal({
                title: "请输入技工院校地址!",
                text: "您好！技工院校地址不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (ths005 == "" || ths005 == null) {
            swal({
                title: "请输入入学日期!",
                text: "您好！入学日期不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        } else {
            if (ths005 != "" || ths005 != null) {
                //判断格式是否正确
                var month = ths005.split("-")[1];
                var day = ths005.split("-")[2];
                var trueorfalse = new Date(ths005).getDate() == ths005.substring(ths005.length - 2);
                if (month.length == 2 && day.length == 2 && trueorfalse == true) {

                } else {
                    swal({
                        title: "入学日期格式不正确!",
                        text: "您好！日期应该为2019-01-01的格式",
                        timer: 2000,
                        showConfirmButton: false
                    });
                    return flag;
                }
            }
        }
        if (ths006 != "" && ths006 != null) {
            //判断格式是否正确
            var month = ths006.split("-")[1];
            var day = ths006.split("-")[2];
            var trueorfalse = new Date(ths006).getDate() == ths006.substring(ths006.length - 2);
            if (month.length == 2 && day.length == 2 && trueorfalse == true) {

            } else {
                swal({
                    title: "毕业日期格式不正确!",
                    text: "您好！日期应该为2019-01-01的格式",
                    timer: 2000,
                    showConfirmButton: false
                });
                return flag;
            }
        }
        if (ths009 == "" || ths009 == null) {
            swal({
                title: "请输入院校区域!",
                text: "您好！院校区域不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (ths010 == "" || ths010 == null) {
            swal({
                title: "请输入是否苏陕协作!",
                text: "您好！是否苏陕协作不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }

        flag = 1;
        return flag;
    }

        //手机号码校验
        function huzhuphone(tel,inputid){
            var re = /^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/;
            var re2 = /^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/;
            if (!re.test(tel) && !re2.test(tel)) {
                swal({
                    title: "电话号码错误!",
                    text: "您好！请输入正确的电话号码",
                    timer: 2000,
                    showConfirmButton: false
                });
                $("#"+inputid).focus();
            }
        }


        //身份证号码校验
        function idcardval(card,inputid){
            var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
            if(!pattern.test(card)){
                swal({
                    title: "身份证错误!",
                    text: "您好！请输入正确的身份证号码",
                    timer: 2000,
                    showConfirmButton: false
                });
                $("#"+inputid).val('');
                $("#"+inputid).focus();
            }
        }


    /**
     * 根据身份证号码查询  性别年龄
     * 身份证号   性别   年龄
     */
    function countPhd003(phd003){

        var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
        if(!pattern.test(phd003)){
            $("#phd003").val('');
            $("#phd003").focus;
            swal({
                title: "身份证错误!",
                text: "您好！请输入正确的身份证号码",
                timer: 2000,
                showConfirmButton: false
            });
        }else{
            if(phd003 != null && phd003 != ''){
                $.ajax({
                    url:"/poorwork/queryPoorByIdCard",    //请求的url地址
                    dataType:"text",   //返回格式为json
                    async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                    data:{"phd003":phd003},    //参数值
                    type:"POST",   //请求方式
                    beforeSend:function(){
                        //请求前的处理
                    },
                    success:function(data){
                        //请求成功时处理
                        if(data != null && data != undefined){
                            if(data == 'yes'){
                                $("#phd003").val('');
                                $("#phd002").val('');
                                $("#phd003").focus();
                                //说明该贫困户已经登记，不能重复登记
                                swal({
                                    title: "该贫困户已经登记!",
                                    text: "您好！该贫困户信息已经登记，不能重复登记",
                                    timer: 2000,
                                    showConfirmButton: false
                                });
                            }else if(data=='no'){
                                //获取出生日期
                                //var birthday = phd003.substring(6, 10) + "-" + phd003.substring(10, 12) + "-" + phd003.substring(12, 14);
                                //获取性别
                                if (parseInt(phd003.substr(16, 1)) % 2 == 1) {
                                    $("#phd004").prop("value",1);
                                } else {
                                    $("#phd004").prop("value",2);//女
                                }
                                //获取年龄
                                var myDate = new Date();
                                var month = myDate.getMonth() + 1;
                                var day = myDate.getDate();

                                var age = myDate.getFullYear() - phd003.substring(6, 10) - 1;
                                if (phd003.substring(10, 12) < month || phd003.substring(10, 12) == month && phd003.substring(12, 14) <= day) {
                                    age++;
                                }
                                $("#phd005").val(age);
                            }
                        }
                        return flag;
                    },
                    complete:function(){
                        //请求完成的处理
                    },
                    error:function(){
                        //请求出错处理
                    }
                });
            }
        }
    }


    function countPlf005(plf005){
        var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
        if(!pattern.test(plf005)){
            $("#plf005").val('');
            $("#plf005").focus;
            swal({
                title: "身份证错误!",
                text: "您好！请输入正确的身份证号码",
                timer: 2000,
                showConfirmButton: false
            });
        }else{
            if(plf005 != null && plf005 != ''){

                $.ajax({
                    url:"/poorwork/queryWorkerByIdCard",    //请求的url地址
                    dataType:"text",   //返回格式为json
                    async:true,//请求是否异步，默认为异步，这也是ajax重要特性
                    data:{"plf005":plf005},    //参数值
                    type:"POST",   //请求方式
                    beforeSend:function(){
                        //请求前的处理
                    },
                    success:function(data){
                        //请求成功时处理
                        if(data != null && data != undefined){
                            if(data == 'yes'){
                                $("#plf005").val('');
                                $("#plf004").val('');
                                $("#plf005").focus();
                                //说明该贫困户已经登记，不能重复登记
                                swal({
                                    title: "该劳动力已经登记!",
                                    text: "您好！该劳动力信息已经登记，不能重复登记",
                                    timer: 2000,
                                    showConfirmButton: false
                                });
                            }else{
                                //获取出生日期
                                //var birthday = phd003.substring(6, 10) + "-" + phd003.substring(10, 12) + "-" + phd003.substring(12, 14);
                                //获取性别
                                if (parseInt(plf005.substr(16, 1)) % 2 == 1) {
                                    $("#plf007").prop("value",1);
                                } else {
                                    $("#plf007").prop("value",2);//女
                                }
                                //获取年龄
                                var myDate = new Date();
                                var month = myDate.getMonth() + 1;
                                var day = myDate.getDate();

                                var age = myDate.getFullYear() - plf005.substring(6, 10) - 1;
                                if (plf005.substring(10, 12) < month || plf005.substring(10, 12) == month && plf005.substring(12, 14) <= day) {
                                    age++;
                                }
                                $("#plf008").val(age);
                            }
                        }
                    },
                    complete:function(){
                        //请求完成的处理
                    },
                    error:function(){
                        //请求出错处理
                    }
                });



            }
        }

    }


    /**
     * 根据身份证号码查询该劳动力是否已经登记
     * 劳动力
     */
    function queryWorkerByIdCard(plf005) {
        var flag = 1;

    }


    /**
     * 选择就业创业状态
     */
    function jiuye_status() {
        var plf011 = $("#plf011").val(); //就业创业状态
        var plf010 = $("#plf010").val();//就业创业意愿
        if (plf011 == '1') {
            $("#plf010").removeAttrs("disabled");
            $("#plf010").prop("value", "");
            $("#jiuye_yiyuan").show();

        } else {
            $("#plf010").attr("disabled", "disabled");
            $("#plf010").prop("value", "");
            $("#jiuye_yiyuan").hide();
        }
        if (plf011 == '1' && plf010 == '1') {
            $("#plf017_span").show();//就业意向显示出来
        } else {
            $("#plf017_span").hide();//就业意向隐藏
        }
    }


    /**
     * 培训教育
     */
    function educate() {
        var plf024 = $("#plf024").val(); //就业创业状态
        if (plf024 == '6') {
            $("#plf012").removeAttrs("disabled");
            $("#plf012").val("");
            $("#peixun_yiyuan").show();
        } else {
            $("#plf012").attr("disabled", "true");
            $("#plf012").val(plf024);
            $("#peixun_yiyuan").hide();
        }
    }





    /**
     * 就业创业意愿
     */
    function chuangye_status(){
        var plf011 = $("#plf011").val(); //就业创业状态
        var plf010 = $("#plf010").val();//就业创业意愿
        if(plf011 =='1' && plf010 == '1'){
            $("#plf017_span").show();//就业意向显示出来
        }else{
            $("#plf017_span").hide();//就业意向隐藏
        }
    }

    /**
     * 根据就业类型判断，如果是农业就业则  上年度农业人均年纯收入必须大于3100
     */
    function geteys015(){
        var eys004 = $("#eys004").val();//获取就业类型
        var eys015 = $("#eys015").val();
        if(eys004 != "" && eys004 != null && eys015 !='' && eys015 !=null){
            /*if(eys004 == '3' && eys015 < 3100){  //说明是农业就业
                swal("您好！上年度农业人均年纯收入必须大于3100!");
                $("#eys015").val('');
                $("#eys015").focus();
            }*/
        }
    }

    //就业类型
    function geteys004(){
        var eys004 = $("#eys004").val();//获取就业类型
        var eys015 = $("#eys015").val();
        if (eys004 != "" && eys004 != null && eys015 != '' && eys015 != null) {
            if (eys004 == '3') {
                //农业就业，就业开始日期改为非必填
                $("#jiuye_start_span").hide();
                $("#eys009").val(getNowFormatDate());
            } else {
                //就业开始日期改为必填
                $("#jiuye_start_span").show();
            }

            /* if (eys004 == '3' && eys015 < 3015) {  //说明是农业就业
             swal("您好！上年度农业人均年纯收入必须大于3015!");
             $("#eys015").val('');
             $("#eys015").focus();
             }*/
        }

        if (eys004 != "" && eys004 != null) {
            if (eys004 == '3') {
                //农业就业，就业开始日期改为非必填
                $("#jiuye_start_span").hide();
                $("#eys009").val(getNowFormatDate());
            } else {
                //就业开始日期改为必填
                $("#jiuye_start_span").show();
            }
            //说明是转移就业，则上年度农业收入变灰
            if(eys004 == '1'){
                // $("#eys015").attr("readonly", "readonly");
            }else{
                $("#eys015").removeAttrs("disabled");
            }

            //说明是灵活就业，则上年度农业收入变灰，单位性质变灰
            if(eys004 == '2'){
                $("#eys015").attr("disabled", "true");
                $("#eys007").attr("disabled", "true");
            }else{
                $("#eys015").removeAttrs("disabled");
                $("#eys007").removeAttrs("disabled");
            }

        }

    }


    /**
     * 特色就业选择执行的方法
     * 选公益专岗、城镇公岗、特设公岗后，其后均应出现岗位补贴（）元、工资发放周期（）个月
     */
    function eys011change(value){
        if(value == '5' || value == '6' || value == '7'){
            $("#jiuye_type").show();
        }else{
            $("#jiuye_type").hide();
            $("#eys017").val('');
            $("#eys018").val('');
        }
    }

    /**
     * 培训类型的选择   培训添加
     */
    function changetsn003(value) {
        if(value == '1'){   //说明是就业
            $("#tsn002_span").show();
            $("#tsn002_label").text('培训后就业年月');
        }else if(value == '4'){ //说明是创业培训
            $("#tsn002_span").show();
            $("#tsn002_label").text('培训后成功创业年月');
        }else{
            $("#tsn002_span").hide();
        }
    }

    /**
     * 培训弹窗的  苏陕协作下拉
     */
    function tsn012change(value) {
        if(value == '1'){   //说明是
            $("#tsn013_span").show();
            $("#tsn015_span").show();
        }else if(value == '2'){ //说明否
            $("#tsn013_span").hide();
            $("#tsn015_span").hide();
            $("#tsn013").val("");
            $("#tsn014").val("");
            $("#tsn015").val("");
        }else{
            $("#tsn013_span").hide();
            $("#tsn015_span").hide();
            $("#tsn013").val("");
            $("#tsn014").val("");
            $("#tsn015").val("");
        }
    }

    /**
     *  培训模块
     * 如果苏陕协作选择是  则只允许填一个日期
     */
    function changetsn013(value,id1,id2) {

        if(value != null && value !=''){
            $("#"+id1).val('');
            $("#"+id2).val('');
        }

    }

    //复选框全选操作
    function checkallcheckbox(){

        if ($("#checkall").prop("checked") == true) {
            // 上面的复选框已被选中
            $("input[name='checkitem']").prop("checked", true);
        } else {
            // 上面的复选框没被选中
            $("input[name='checkitem']").prop("checked", false);
        }
    }

    //批量删除
    function deleteAll(){
        //jquery获取复选框值
        var chk_value =[];//定义一个数组
        $('input[name="checkitem"]:checked').each(function(){//遍历每一个名字为interest的复选框，其中选中的执行函数
            chk_value.push($(this).val());//将选中的值添加到数组chk_value中
        });
        if(chk_value.length>0){
            swal({
                title: "您确定要删除这条信息吗",
                text: "删除后将无法恢复，请谨慎操作！",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                cancelButtonText:"取消",
                confirmButtonText: "删除",
                closeOnConfirm: false
            }, function () {
                $.ajax({
                    url:"/poorwork/delAllPoorWorkByIds",    //请求的url地址
                    dataType:"text",   //返回格式为json
                    async:false,//请求是否异步，默认为异步，这也是ajax重要特性
                    data:{"phd001s":chk_value},    //参数值
                    type:"POST",   //请求方式
                    beforeSend:function(){
                        //请求前的处理
                    },
                    success:function(data){
                        //请求成功时处理
                        if(data != null && data != undefined){
                            if(data == 'yes'){
                                loadpoor();//加载劳动力表格
                                swal("删除成功！", "您已经永久删除了这条信息。", "success");
                            }else if(data == 'no'){
                                swal("删除失败！", "您未删除这条信息。", "fail");
                            }
                        }
                    },
                    complete:function(){

                    },
                    error:function(){
                        //请求出错处理
                    }
                });

            });
        }else{
            swal({
                title: "请选择需要批量删除的数据!",
                text: "您好！请您先勾选需要批量删除数据前的复选框",
                timer: 2000,
                showConfirmButton: false
            });
        }
    }


    /**
     * 导出待确认贫困户信息
     */
    function poiExcel() {

        var  phd002_scan = $("#phd002_scan").val();
        var  phd003_scan = $("#phd003_scan").val();
        var  phd012_scan = $("#phd012_scan").val();
        var  treeid = $("#aab301").val();
        if(treeid.substring(4,6)=='00'){
            swal({
                title: "请先选择需要导出区县!",
                text: "您好,请选择需要导出的区县",
                timer: 2000,
                showConfirmButton: false
            });
            return false;
        }else{
            window.location.href="/import/exportToBeComfirePoorWork?phd002_scan="+phd002_scan+"&phd003_scan="+phd003_scan+"&phd012_scan="+phd012_scan+"&treeid="+treeid;
            $("#jindutiao_div").modal('show');
            startJindutiao();
        }
    }


    var i=0;
    /*add——创建tbx下的div加文字和变宽度的方法*/
    function add(i){
        var tbox =$(".jindutiao_tbox");
        var tiao =$(".jindutiao_tiao");
        tiao.css("width",i+"%").html(i+"%");
    }
    /*创建方法（i++循环起来）*/
    function startJindutiao(){
        $(".jindutiao_ok").html("导出完成。。。").fadeOut("slow");
        $(".jindutiao_ok").html("正在进行导出请稍等。。。").fadeIn("slow");
        if(i>100){
            i =0;
            $("#jindutiao_div").modal('hide');
            $(".jindutiao_ok").html("正在进行导出请稍等。。。").fadeOut("slow");
            $(".jindutiao_ok").html("导出完成。。。").fadeIn("slow");
            return;
        }
        if(i<=100){
            setTimeout("startJindutiao()",100)
            add(i);
            i++;
        }
    }

    //劳动能力修改
    function changeplf018(value){
        //死亡或者丧失劳动能力
        if(value=='03' || value=='04'){
            $("#plf010").attr("disabled", "true");
            $("#plf011").attr("disabled", "true");
            $("#plf012").attr("disabled", "true");
            $("#plf024").attr("disabled", "true");
            $("#plf010").prop("value", "");
            $("#plf011").prop("value", "");
            $("#plf012").prop("value", "");
            $("#plf024").prop("value", "");
            $("#jiuye_yiyuan").hide();
            $("#jiuye_status").hide();
            $("#peixun_yiyuan").hide();
            $("#peixun_status").hide();

        }else{
            $("#plf010").removeAttrs("disabled");
            $("#plf011").removeAttrs("disabled");
            $("#plf012").removeAttrs("disabled");
            $("#plf024").removeAttrs("disabled");
            $("#jiuye_yiyuan").show();
            $("#jiuye_status").show();
            $("#peixun_yiyuan").show();
            $("#peixun_status").show();
            var plf015 = $("#plf015").val();

            if(plf015 !='' &&  plf015 == '1' && plf015 != null && value !='null'){
                //说明上学状态有值，则锁死就业创业等
                $("#plf010").attr("disabled", "true");
                $("#plf011").attr("disabled", "true");
                $("#plf012").attr("disabled", "true");
                $("#plf024").attr("disabled", "true");
                $("#plf010").prop("value", "");
                $("#plf011").prop("value", "");
                $("#plf012").prop("value", "");
                $("#plf024").prop("value", "");
                $("#jiuye_yiyuan").hide();
                $("#jiuye_status").hide();
                $("#peixun_yiyuan").hide();
                $("#peixun_status").hide();
            }else{
                $("#plf010").removeAttrs("disabled");
                $("#plf011").removeAttrs("disabled");
                $("#plf012").removeAttrs("disabled");
                $("#plf024").removeAttrs("disabled");
                $("#jiuye_yiyuan").show();
                $("#jiuye_status").show();
                $("#peixun_yiyuan").show();
                $("#peixun_status").show();
            }
        }
    }

    //上学状态
    function changeplf015(value) {
        if (value != '' && value == '1' && value != null && value !='null') {
            //说明上学状态有值，则锁死就业创业等
            $("#plf010").attr("disabled", "true");
            $("#plf011").attr("disabled", "true");
            $("#plf012").attr("disabled", "true");
            $("#plf024").attr("disabled", "true");
            $("#plf010").prop("value", "");
            $("#plf011").prop("value", "");
            $("#plf012").prop("value", "");
            $("#plf024").prop("value", "");
            $("#jiuye_yiyuan").hide();
            $("#jiuye_status").hide();
            $("#peixun_yiyuan").hide();
            $("#peixun_status").hide();
        } else {
            $("#plf010").removeAttrs("disabled");
            $("#plf011").removeAttrs("disabled");
            $("#plf012").removeAttrs("disabled");
            $("#plf024").removeAttrs("disabled");
            $("#jiuye_yiyuan").show();
            $("#jiuye_status").show();
            $("#peixun_yiyuan").show();
            $("#peixun_status").show();
            var plf018 = $("#plf018").val();
            //死亡或者丧失劳动能力
            if (plf018 == '03' || plf018 == '04') {
                $("#plf010").attr("disabled", "true");
                $("#plf011").attr("disabled", "true");
                $("#plf012").attr("disabled", "true");
                $("#plf024").attr("disabled", "true");
                $("#plf010").prop("value", "");
                $("#plf011").prop("value", "");
                $("#plf012").prop("value", "");
                $("#plf024").prop("value", "");
                $("#jiuye_yiyuan").hide();
                $("#jiuye_status").hide();
                $("#peixun_yiyuan").hide();
                $("#peixun_status").hide();

            } else {
                $("#plf010").removeAttrs("disabled");
                $("#plf011").removeAttrs("disabled");
                $("#plf012").removeAttrs("disabled");
                $("#plf024").removeAttrs("disabled");
                $("#jiuye_yiyuan").show();
                $("#jiuye_status").show();
                $("#peixun_yiyuan").show();
                $("#peixun_status").show();
            }
        }
    }


    /**
     * 展开收缩按钮的点击事件
     */
    function click_shousuo(sh){
        var flag = $(sh).children('i').attr('class');
        //判断现在是展开还是关闭状态
        if(flag == 'fa fa-chevron-down'){
            $(sh).children('i').html('<font color="blue">关闭</font>');
        }else if(flag == 'fa fa-chevron-up'){
            $(sh).children('i').html('<font color="blue">展开</font>');
        }
    }


    /**
     * 查询参数，获取对应的下拉值
     */
    function queryAllAa10list() {
        var aaa100 = ["EDC441","AAC004","AAA012","AAC011","AAA001","AAA002","AAA004","PLF024",
            "AAA016","AAA017","PLF025","AAA018","AAA019","AAA020","AAA013","AAA008","AAA006",
            "ECC207","AAA005","AAA007","AAA003","AAA011","THS009","PHD017","EYS024"];
        $.ajax({
            url: "/aa10/queryAllAa10list",    //请求的url地址
            dataType: "json",   //返回格式为json
            async: false,//请求是否异步，默认为异步，这也是ajax重要特性
            // data: {"aaa100list": JSON.stringify(aaa100).toString()},    //参数值
            data:{},
            type: "POST",   //请求方式
            beforeSend: function () {
                //请求前的处理
            },
            success: function (data) {
                //请求成功时处理
                if (data != null && data != undefined) {

                    for(var i=0;i<data.length;i++){
                        var options = "";
                        if(data[i].aaa100 == 'EDC441'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#phd013").append(options);
                            $("#phd013_scan").append(options);
                            $("#phd016").append(options);
                            $("#phd016_scan").append(options);
                            $("#plf023").append(options);
                            $("#epp010").append(options);
                            $("#ths010").append(options);
                            $("#tsn012").append(options);

                        }else if(data[i].aaa100 == 'AAC004'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#phd004").append(options);
                            $("#phd004_scan").append(options);
                            $("#plf007").append(options);
                        }else if(data[i].aaa100 == 'AAA012'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#phd014").append(options);
                            $("#phd014_scan").append(options);
                        }else if(data[i].aaa100 == 'AAC011'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf009").append(options);
                        }else if(data[i].aaa100 == 'AAA001'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf014").append(options);
                        }else if(data[i].aaa100 == 'AAA002'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf011").append(options);
                        }else if(data[i].aaa100 == 'AAA004'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf010").append(options);
                        }else if(data[i].aaa100 == 'PLF024'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf024").append(options);
                        }else if(data[i].aaa100 == 'AAA016'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf018").append(options);
                        }else if(data[i].aaa100 == 'AAA017'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf015").append(options);
                        }else if(data[i].aaa100 == 'PLF025'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf025").append(options);
                        }else if(data[i].aaa100 == 'AAA018'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys005").append(options);
                        }else if(data[i].aaa100 == 'AAA019'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#epp003").append(options);
                            $("#tsn004").append(options);
                        }else if(data[i].aaa100 == 'AAA020'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#epp013").append(options);
                        }else if(data[i].aaa100 == 'AAA013'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys003").append(options);
                        }else if(data[i].aaa100 == 'AAA008'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys012").append(options);

                        }else if(data[i].aaa100 == 'AAA006'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys004").append(options);
                        }else if(data[i].aaa100 == 'ECC207'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys007").append(options);
                        }else if(data[i].aaa100 == 'AAA005'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys011").append(options);
                        }else if(data[i].aaa100 == 'AAA007'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#tsn003").append(options);
                        }else if(data[i].aaa100 == 'AAA003'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf012").append(options);
                        }else if(data[i].aaa100 == 'AAA011'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#plf017").append(options);
                        }else if(data[i].aaa100 == 'THS009'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#ths009").append(options);
                        }else if(data[i].aaa100 == 'PHD017'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#phd017").append(options);
                        }else if(data[i].aaa100 == 'EYS024'){
                            options += "<option value='" + data[i].aaa102 + "'>" + data[i].aaa103 + "</option>";
                            $("#eys024").append(options);
                        }

                    }
                }
            },
            complete: function () {
                //请求完成的处理
            },
            error: function () {
                //请求出错处理
            }
        });
    }

    //成员变更
    function changeplf025(value){
        if(value != null && value !=''){
            $("#jiuye_status").hide();
            $("#jiuye_yiyuan").hide();
        }else{
            $("#jiuye_status").hide();
            $("#jiuye_yiyuan").hide();
        }

    }


    //户主变更
    function poorChange(){
        //将老户主信息放在上面，
        $("#phd001_old").val($("#phd001").val());
        $("#phd002_old").val($("#phd002").val());
        $("#phd003_old").val($("#phd003").val());
        $("#aab301_id_id").val($("#aab301_id").val());
        loadpoorChange();
    }

    //户主变更保存
    function savePoorChange(){
        if (checkAll_poor_change() == 1) {
            $('#save_poor_change_btn').addClass('disabled');  //按鈕变灰
            $.ajax({
                url: "/poorwork/savePoorChange",    //请求的url地址
                dataType: "text",   //返回格式为json
                async: false,//请求是否异步，默认为异步，这也是ajax重要特性
                data: $('#poorchangeForm').serialize(),    //参数值
                type: "POST",   //请求方式
                beforeSend: function () {
                    //请求前的处理
                },
                success: function (data) {
                    /*$("input").val('');
                     $("#phd013").prop("value","");
                     $("#phd004").prop("value","");
                     $("#phd014").prop("value","");*/
                    //请求成功时处理
                    if (data != null && data != undefined) {
                        if (data == 'login') {
                            swal("保存失败！", "您好,您的登陆信息已过期，请重新登录。", "error");
                        }else if (data == 'update') {
                            loadpoor();
                            updatePoorWork($("#phd001").val());
                            loadpoorChange();
                            swal("户主变更成功！", "您已经成功修改了这条信息。", "success");
                        }
                        $('#save_poor_change_btn').removeClass('disabled');//按钮还原

                    }
                },
                complete: function () {
                    $('#save_poor_change_btn').removeClass('disabled');//按钮还原
                },
                error: function () {
                    //请求出错处理
                }
            });
        }
    }

    //贫困户   保存前校验必填项是否都填写
    function checkAll_poor_change() {
        var phd002 = $("#phd002_new").val();
        var phd003 = $("#phd003_new").val();
        var phd006 = $("#phd006_new").val();
        var phd013 = $("#phd013_new").val();
        var phd010 = $("#phd010_new").val();//集中安置点名称
        var phd007 = $("#phd007_new").val();
        var changereason = $("#changereason").val();
        var flag = 0;
        if (phd002 == "" || phd002 == null) {
            swal({
                title: "请输入新户主姓名!",
                text: "您好！新户主姓名不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (changereason == "" || changereason == null) {
            swal({
                title: "请输入变更原因!",
                text: "您好！变更原因不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (phd003 == "" || phd003 == null) {
            swal({
                title: "请输入身份证号!",
                text: "您好！身份证号不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }
        if (phd006 == "" || phd006 == null) {
            swal({
                title: "请输入户主电话!",
                text: "您好！户主电话不能为空",
                timer: 2000,
                showConfirmButton: false
            });
            return flag;
        }

        flag = 1;
        return flag;
    }


    /**
     * 加载户主变更表格
     * 户主变更表格
     */
    function loadpoorChange() {
        //重要修改 表格内容的自定义，需要根据业务定制
        poor_record_datatable = $("#poor_record_table").dataTable({
            destroy: true,
            autoWidth: false,  //禁用自动调整列宽
            ordering: false,//禁止排序
            stripeClasses: ["odd", "even"],  //为奇偶行加上样式，兼容不支持CSS伪类的场合
            processing: false,  //隐藏加载提示,自行处理
            serverSide: false,  //启用服务器端分页
            aLengthMenu: [10, 20, 50, 100],  //用户可自选每页展示数量 5条或10条
            searching: false,  //禁用原生搜索
            orderMulti: false,  //启用多列排序
            order: [],  //取消默认排序查询,否则复选框一列会出现小箭头
            renderer: "bootstrap",  //渲染样式：Bootstrap和jquery-ui
            pagingType: "full_numbers",  //分页样式：simple,simple_numbers,full,full_numbers
            paging: false,//禁止分页
            info: false,
            columnDefs: [{
                "targets": 'nosort',  //列的样式名
                "orderable": false    //包含上样式名‘nosort’的禁止排序
            }],
            ajax: function (data, callback, settings) {

                //封装请求参数
                var phd001 = $("#phd001").val();
                var param = {"phd001": phd001};
                //根据劳动力id 查询就业信息
                //ajax请求数据方法
                $.ajax({
                    type: "POST",
                    url: "/poorwork/queryPoorChangeByPcr002",//url请求的地址
                    cache: false,  //禁用缓存
                    data: param,  //传入组装的参数
                    dataType: "json",
                    success: function (result) {
                        //封装返回数据重要
                        var returnData = {};
                        //返回的数据列表
                        returnData.data = result;
                        //调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
                        //此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
                        callback(returnData);
                    }
                });
            },
            //列表表头字段
            columns: [
                {"data": "pcr003"},
                {"data": "pcr004"},
                {"data": "pcr006"},
                {"data": "pcr007"},
                {"data": "pcr008"}
            ]
        }).api();
        //此处需调用api()方法,否则返回的是JQuery对象而不是DataTables的API对象
    }

    /**
     * 根据aab301查找名称
     */
    function queryAab301Info(aab301,hidden_id) {
        $.ajax({
            url:"/Information/queryAab301Info",    //请求的url地址
            dataType:"json",   //返回格式为json
            async:false,//请求是否异步，默认为异步，这也是ajax重要特性
            data:{"aab301":aab301},    //参数值
            type:"POST",   //请求方式
            beforeSend:function(){
                //请求前的处理
            },
            success:function(data){
                //请求成功时处理
                if(data != null && data != undefined){
                    $("#"+hidden_id).val(data.info);
                }
            },
            complete:function(){

            },
            error:function(){
                //请求出错处理
            }
        });
    }

    //重置按钮
    function reset() {
        $("#select_div input").val('');
        $("#select_div select").prop('value', '');
    }
</script>

<script>
    window.onload = function(){
        //屏蔽键盘事件
        document.onkeydown = function (){
            var e = window.event || arguments[0];
            //F12
            if(e.keyCode == 123){
                return false;
                //Ctrl+Shift+I
            }else if((e.ctrlKey) && (e.shiftKey) && (e.keyCode == 73)){
                return false;
                //Shift+F10
            }else if((e.shiftKey) && (e.keyCode == 121)){
                return false;
                //Ctrl+U
            }else if((e.ctrlKey) && (e.keyCode == 85)){
                return false;
            }
        };
        //屏蔽鼠标右键
        document.oncontextmenu = function (){
            return false;
        }
    }
</script>

</body>

</html>
